<!doctype html><html><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-F9Y0YKG55S"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-F9Y0YKG55S")</script><link rel=canonical href=https://vald.vdaas.org><meta charset=utf-8><meta name=viewport content="width=device-width"><meta name=robots content="index, follow"><title>Vald | index</title><meta name=description content="Vald is high scalable distributed high-speed approximate nearest neighbor search engine" }><meta name=format-detection content="telephone=no"><meta http-equiv=x-ua-compatible content="IE=edge"><meta property="og:type" content="article"><meta property="og:title" content="Vald | index"><meta property="og:description" content="Vald is high scalable distributed high-speed approximate nearest neighbor search engine"><meta property="og:url" content="https://vald.vdaas.org/docs/v1.7/overview/component/"><meta property="og:image" content="https://vald.vdaas.org/images/ogp_vald.png"><meta property="og:site_name" content="vald"><meta property="og:locale" content="en_US"><meta property="fb:app_id" content="615732422350002"><meta name=twitter:site content="@vdaas_vald"><meta name=twitter:card content="app"><link rel="shortcut icon" href=https://vald.vdaas.org/favicon.ico><link rel=stylesheet type=text/css href=/css/style.min.css><link rel=stylesheet type=text/css href=/css/header.min.css><link rel=stylesheet type=text/css href=/css/footer.min.css><link rel=stylesheet type=text/css href=/css/main.min.css><script type=text/javascript src=/js/script.min.js defer></script><meta name=viewport content="target-densitydpi=device-dpi,width=device-width,maximum-scale=1,user-scalable=yes"></head><body><header class=header id=header><div class=header__content><nav class=header__nav><a href=https://vald.vdaas.org class=header-nav__link><picture class=header-nav__image><source srcset=https://vald.vdaas.org/images/vald_white.svg media="(prefers-color-scheme: dark)"><img src=https://vald.vdaas.org/images/vald_color_1.svg alt></picture></a>
<a class=header-nav__icon id=nav-btn><span class=header-nav__button></span></a><ul class=header__list id=menu><li class=header__item><a href=/docs/v1.7/overview/about-vald class=header__link>About</a></li><li class=header__item><a href=/docs/v1.7/tutorial/get-started class=header__link>Get Started</a></li><li class=header__item><a href=/docs/v1.7/user-guides/sdks class=header__link>SDKs</a></li><li class=header__item><a href=/docs/v1.7 class=header__link>Docs</a></li><li class=header__item><a href=https://vdaas-vald.medium.com/ target=_blank class=header__link>Blog<br></a></li><li class=header__item><details class=header__version id=version_details><summary class=version__current id=current_version>v1.7</summary><ul class=version__list><il class=version__item><a href=javascript:void(0) class="version__link version__link--latest">v1.7.6</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.7</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.6</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.5</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.4</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.3</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.2</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.1</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.0</a></il></ul></details></li><li class=header__item><a class=header__git href=https://github.com/vdaas/vald target=_blank><picture class=git__logo><source srcset=https://vald.vdaas.org/images/logo_github_white.svg media="(prefers-color-scheme: dark)" width=18 height=18><img src=https://vald.vdaas.org/images/logo_github_black.svg alt=github width=18 height=18></picture><div class=git__star><p class=git__starnum id=git-star-num></p></div></a></li></ul></nav></div></header><main role=main><div class=single><aside class=page><nav><ul id=list-body><li class=withchild id=cat_Overview>Overview<ul><li class=index><a href=/docs/v1.7/overview/about-vald/>About Vald</a></li><li class=index><a href=/docs/v1.7/overview/architecture/>Architecture</a></li><li class=index><a href=/docs/v1.7/overview/data-flow/>Data Flow</a></li></ul></li><li class=withchild id=cat_Component>Component<ul><li class=index><a href=/docs/v1.7/overview/component/agent/>Agent</a></li><li class=index><a href=/docs/v1.7/overview/component/lb-gateway/>Lb Gateway</a></li><li class=index><a href=/docs/v1.7/overview/component/filter-gateway/>Filter Gateway</a></li><li class=index><a href=/docs/v1.7/overview/component/discoverer/>Discoverer</a></li><li class=index><a href=/docs/v1.7/overview/component/index-manager/>Index Manager</a></li></ul></li><li class=withchild id=cat_Tutorial>Tutorial<ul><li class=index><a href=/docs/v1.7/tutorial/get-started/>Get Started</a></li><li class=index><a href=/docs/v1.7/tutorial/vald-agent-standalone-on-k8s/>Vald Agent Standalone on K8s</a></li><li class=index><a href=/docs/v1.7/tutorial/vald-agent-standalone-on-docker/>Vald Agent Standalone on Docker</a></li></ul></li><li class=withchild id=cat_Usecase>Usecase<ul><li class=index><a href=/docs/v1.7/usecase/usage-example/>Usage Example</a></li></ul></li><li class=withchild id="cat_User Guides">User Guides<ul><li class=index><a href=/docs/v1.7/user-guides/configuration/>Configuration</a></li><li class=index><a href=/docs/v1.7/user-guides/backup-configuration/>Backup Configuration</a></li><li class=index><a href=/docs/v1.7/user-guides/filtering-configuration/>Filtering Configuration</a></li><li class=index><a href=/docs/v1.7/user-guides/cluster-role-binding/>Cluster Role Binding</a></li><li class=index><a href=/docs/v1.7/user-guides/deployment/>Deployment</a></li><li class=index><a href=/docs/v1.7/user-guides/operations/>Operations</a></li><li class=index><a href=/docs/v1.7/user-guides/upgrade-cluster/>Upgrade Cluster</a></li><li class=index><a href=/docs/v1.7/user-guides/capacity-planning/>Capacity Planning</a></li><li class=index><a href=/docs/v1.7/user-guides/client-api-config/>Client Api Config</a></li><li class=index><a href=/docs/v1.7/user-guides/observability-configuration/>Observability Configuration</a></li><li class=index><a href=/docs/v1.7/user-guides/sdks/>Sdks</a></li></ul></li><li class=withchild id=cat_Performance>Performance<ul><li class=index><a href=/docs/v1.7/performance/loadtest/>Loadtest</a></li><li class=index><a href=/docs/v1.7/performance/benchmark/>Benchmark</a></li></ul></li><li class=withchild id=cat_Api>API<ul><li class=index><a href=/docs/v1.7/api/insert/>Insert</a></li><li class=index><a href=/docs/v1.7/api/update/>Update</a></li><li class=index><a href=/docs/v1.7/api/upsert/>Upsert</a></li><li class=index><a href=/docs/v1.7/api/search/>Search</a></li><li class=index><a href=/docs/v1.7/api/remove/>Remove</a></li><li class=index><a href=/docs/v1.7/api/object/>Object</a></li><li class=index><a href=/docs/v1.7/api/filter-gateway/>Filter Gateway</a></li><li class=index><a href=/docs/v1.7/api/status/>Status</a></li><li class=index><a href=/docs/v1.7/api/build_proto/>Build Proto</a></li></ul></li><li class=withchild id=cat_Troubleshooting>Troubleshooting<ul><li class=index><a href=/docs/v1.7/troubleshooting/provisioning/>Provisioning</a></li><li class=index><a href=/docs/v1.7/troubleshooting/client-side/>Client Side</a></li></ul></li><li class=withchild id=cat_Contributing>Contributing<ul><li class=index><a href=/docs/v1.7/contributing/contributing-guide/>Contributing Guide</a></li><li class=index><a href=/docs/v1.7/contributing/development/>Development</a></li><li class=index><a href=/docs/v1.7/contributing/coding-style/>Coding Style</a></li><li class=index><a href=/docs/v1.7/contributing/unit-test-guideline/>Unit Test Guideline</a></li></ul></li><li class=withchild id=cat_Support>Support<ul><li class=index><a href=/docs/v1.7/support/contacts/>Contacts</a></li><li class=index><a href=/docs/v1.7/support/faq/>Faq</a></li></ul></li><li class=withchild id=cat_Release>Release<ul></ul></li></ul></nav></aside><div class=content><div class=markdown><h1 id=components----omit-in-toc--->Components</h1><p>This document will give you an overview of all the components developed and used in Vald.</p><h2 id=table-of-contents----omit-in-toc--->Table of Contents</h2><ul><li><a href=#vald-filter>Vald Filter</a><ul><li><a href=#vald-ingress-filter>Vald Ingress Filter</a></li><li><a href=#vald-egress-filter>Vald Egress Filter</a></li><li><a href=#vald-filter-gateway>Vald Filter Gateway</a></li></ul></li><li><a href=#vald-load-balancing>Vald Load Balancing</a><ul><li><a href=#vald-lb-gateway>Vald LB Gateway</a></li><li><a href=#agent-discoverer>Agent Discoverer</a></li></ul></li><li><a href=#vald-core-engine>Vald Core Engine</a><ul><li><a href=#vald-agent>Vald Agent</a></li><li><a href=#vald-agent-scheduler>Vald Agent Scheduler</a></li><li><a href=#vald-index-manager>Vald Index Manager</a></li></ul></li><li><a href=#kubernetes-components>Kubernetes Components</a><ul><li><a href=#kube-apiserver>Kube-apiserver</a></li><li><a href=#custom-resources>Custom Resources</a></li></ul></li></ul><h2 id=vald-filter>Vald Filter</h2><p>Vald Filter is an optional functionality in Vald.
User can implement the custom filtering logic and integrate with Vald.</p><p>Vald Filter provides the following functionalities.</p><ul><li>Custom filter based on request query</li><li>Custom filter for the searching result</li></ul><h3 id=vald-ingress-filter>Vald Ingress Filter</h3><p>Vald Ingress Filter filters the incoming request before processing it.</p><p>Users can implement custom filtering logic such as changing the vectors or filtering based on user ID.</p><h3 id=vald-egress-filter>Vald Egress Filter</h3><p>Vald Egress Filter filters the response before sending it to the user.</p><p>This component can reorder the searching result from multiple Vald Agents based on the user-defined ranking.</p><h3 id=vald-filter-gateway>Vald Filter Gateway</h3><p>Vald Filter Gateway forwards the request to Vald Ingress Filter before processing it and forwards the response to the Vald Egress Filter before returning the searching result to the user.</p><h2 id=vald-load-balancing>Vald Load Balancing</h2><p>Load balancing is one of the important concepts in distributed computing, which means it distributes a set of tasks over a set of resources aiming for making the overall processing more efficient.
Vald implements its own load balancing controller.
Vald can load balance the request base on node resources.</p><h3 id=vald-lb-gateway>Vald LB Gateway</h3><p>Vald LB Gateway loads balance the user request base on the node resources results from the Agent Discoverer.</p><h3 id=agent-discoverer>Agent Discoverer</h3><p>Agent Discoverer discovers active Vald pods and the corresponding node&rsquo;s resources usage via <a href=https://github.com/kubernetes/kubernetes/tree/master/cmd/kube-apiserver>kube-apiserver</a>.</p><h2 id=vald-core-engine>Vald Core Engine</h2><p>In this section, we will describe what is Vald Agent and the corresponding components to support Vald Agent.</p><h3 id=vald-agent>Vald Agent</h3><p>Vald Agent provides functionalities to perform approximate nearest neighbor search.
Agent-NGT uses <a href=https://github.com/yahoojapan/NGT>yahoojapan/NGT</a> as a core library.</p><p>Each Vald Agent pod has its own vector data space because only several Vald Agents are selected to be inserted/updated in a single insert/update request.</p><p>When searching a vector in Vald, each Vald Agent return different results of <em>k</em>-nearest neighbors depending on their index, and you&rsquo;ll get the merged result of them.</p><h3 id=vald-agent-scheduler>Vald Agent Scheduler</h3><p>Vald Agent Scheduler is the scheduler of the Vald Agent.
It implements it&rsquo;s own custom scheduling logic to increase the scalability of the Vald Agent.</p><p>It schedules Vald Agent base on the Node CPU and memory usage, and the amount of the indexes.</p><h3 id=vald-index-manager>Vald Index Manager</h3><p>Vald Index Manager controls the timing of the indexing inserted vectors on the Vald Agent.
The index is used to increase the performance of the search action.</p><p>It retrieves the active Vald Agent pods from the Vald Discoverer and triggers the indexing action on each Vald Agent.</p><h2 id=kubernetes-components>Kubernetes Components</h2><p>Vald is base on the Kubernetes platform.
In this section we will explain the Kubernetes component used in Vald and why we need them.</p><h3 id=kube-apiserver>Kube-apiserver</h3><p>Kube-apiserver is a component of Kubernetes.
The main responsibility of Kube-apiserver in Vald is to provide node resource information for Vald agent scalability.</p><p>For more information about Kube-apiserver, please refer to <a href=https://kubernetes.io/docs/reference/command-line-tools-reference/kube-apiserver/>the official document</a>.</p><h3 id=custom-resources>Custom Resources</h3><p>Custom Resources in Vald is a <a href=https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/>Custom Resource Definition</a> implementation.
It provides flexibility for users to control the Vald deployment such as pod startup sequence, etc.</p></div><aside class=current id=current><button class=menu><span class=dot></span></button><nav id=TableOfContents><ul><li><a href=#table-of-contents----omit-in-toc--->Table of Contents</a></li><li><a href=#vald-filter>Vald Filter</a><ul><li><a href=#vald-ingress-filter>Vald Ingress Filter</a></li><li><a href=#vald-egress-filter>Vald Egress Filter</a></li><li><a href=#vald-filter-gateway>Vald Filter Gateway</a></li></ul></li><li><a href=#vald-load-balancing>Vald Load Balancing</a><ul><li><a href=#vald-lb-gateway>Vald LB Gateway</a></li><li><a href=#agent-discoverer>Agent Discoverer</a></li></ul></li><li><a href=#vald-core-engine>Vald Core Engine</a><ul><li><a href=#vald-agent>Vald Agent</a></li><li><a href=#vald-agent-scheduler>Vald Agent Scheduler</a></li><li><a href=#vald-index-manager>Vald Index Manager</a></li></ul></li><li><a href=#kubernetes-components>Kubernetes Components</a><ul><li><a href=#kube-apiserver>Kube-apiserver</a></li><li><a href=#custom-resources>Custom Resources</a></li></ul></li></ul></nav></aside></div></div></main><footer class=footer><div class="footer__content cf"><ul class=footer__list><li class=footer__item><a href=/docs/v1.7/overview/about-vald class=footer__link>About<br></a></li><li class=footer__item><a href=/docs/v1.7/tutorial/get-started class=footer__link>Get Started<br></a></li><li class=footer__item><a href=/docs/v1.7/user-guides/sdks class=footer__link>SDKs</a></li><li class=footer__item><a href=/docs/v1.7 class=footer__link>Docs</a></li><li class=footer__item><a href=https://vdaas-vald.medium.com/ target=_blank class=footer__link>Blog<br></a></li><li class=footer__item><a class="footer__item footer__icon" href=https://github.com/vdaas/vald target=_blank><picture><source srcset=https://vald.vdaas.org/images/logo_github_white.svg media="(prefers-color-scheme: dark)" class=icon__image width=24 height=24><img src=https://vald.vdaas.org/images/logo_github_black.svg alt=github class=icon__image></picture></a></li></ul></div><p class=footer__copylight>Â©2019-2023 vald.vdaas.org Vald team</p></footer></body></html>