<!doctype html><html><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-F9Y0YKG55S"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-F9Y0YKG55S")</script><link rel=canonical href=https://vald.vdaas.org><meta charset=utf-8><meta name=viewport content="width=device-width"><meta name=robots content='index, follow'><title>Vald | Search</title>
<meta name=description content="Vald is high scalable distributed high-speed approximate nearest neighbor search engine" }><meta name=format-detection content="telephone=no"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta property="og:type" content="article"><meta property="og:title" content="Vald | Search"><meta property="og:description" content="Vald is high scalable distributed high-speed approximate nearest neighbor search engine"><meta property="og:url" content="https://vald.vdaas.org/docs/v1.4/api/search/"><meta property="og:image" content="https://vald.vdaas.org//images/ogp_vald.png"><meta property="og:site_name" content="vald"><meta property="og:locale" content="en_US"><meta property="fb:app_id" content="615732422350002"><meta name=twitter:site content="@vdaas_vald"><meta name=twitter:card content="app"><link rel="shortcut icon" href=https://vald.vdaas.org//favicon.ico><link rel=stylesheet type=text/css href=/css/style.min.css><link rel=stylesheet type=text/css href=/css/header.min.css><link rel=stylesheet type=text/css href=/css/footer.min.css><link rel=stylesheet type=text/css href=/css/main.min.css><script type=text/javascript src=/js/script.min.js defer></script><meta name=viewport content="target-densitydpi=device-dpi,width=device-width,maximum-scale=1,user-scalable=yes"></head><body><header class=header id=header><div class=header__content><nav class=header__nav><a href=https://vald.vdaas.org/ class=header-nav__link><picture class=header-nav__image><source srcset=https://vald.vdaas.org//images/vald_white.svg media="(prefers-color-scheme: dark)"><img src=https://vald.vdaas.org//images/vald_color_1.svg alt>
</picture></a><a class=header-nav__icon id=nav-btn><span class=header-nav__button></span></a><ul class=header__list id=menu><li class=header__item><a href=/docs/v1.4/overview/about-vald class=header__link>About</a></li><li class=header__item><a href=/docs/v1.4/tutorial/get-started class=header__link>Get Started</a></li><li class=header__item><a href=/docs/v1.4/user-guides/sdks class=header__link>SDKs</a></li><li class=header__item><a href=/docs/v1.4 class=header__link>Docs</a></li><li class=header__item><a href=https://vdaas-vald.medium.com/ target=_blank class=header__link>Blog<br></a></li><li class=header__item><details class=header__version id=version_details><summary class=version__current id=current_version>v1.4</summary><ul class=version__list><il class=version__item><a href=javascript:void(0) class="version__link version__link--latest">v1.7.16</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.7</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.6</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.5</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.4</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.3</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.2</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.1</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.0</a></il></ul></details></li><li class=header__item><a class=header__git href=https://github.com/vdaas/vald target=_blank><picture class=git__logo><source srcset=https://vald.vdaas.org//images/logo_github_white.svg media="(prefers-color-scheme: dark)" width=18 height=18><img src=https://vald.vdaas.org//images/logo_github_black.svg alt=github width=18 height=18></picture><div class=git__star><p class=git__starnum id=git-star-num></p></div></a></li></ul></nav></div></header><main role=main><div class=single><aside class=page><nav><ul id=list-body><li class=withchild id=cat_Overview>Overview<ul><li class=index><a href=/docs/v1.4/overview/about-vald/>About Vald</a></li><li class=index><a href=/docs/v1.4/overview/architecture/>Architecture</a></li><li class=index><a href=/docs/v1.4/overview/data-flow/>Data Flow</a></li></ul></li><li class=withchild id=cat_Component>Component<ul><li class=index><a href=/docs/v1.4/overview/component/agent/>Agent</a></li><li class=index><a href=/docs/v1.4/overview/component/lb-gateway/>LB Gateway</a></li><li class=index><a href=/docs/v1.4/overview/component/discoverer/>Discoverer</a></li><li class=index><a href=/docs/v1.4/overview/component/index-manager/>Index Manager</a></li></ul></li><li class=withchild id=cat_Tutorial>Tutorial<ul><li class=index><a href=/docs/v1.4/tutorial/get-started/>Get Started</a></li><li class=index><a href=/docs/v1.4/tutorial/vald-agent-standalone-on-docker/>Vald Agent Standalone on Docker</a></li><li class=index><a href=/docs/v1.4/tutorial/vald-agent-standalone-on-k8s/>Vald Agent Standalone on K8s</a></li></ul></li><li class=withchild id=cat_Usecase>Usecase<ul><li class=index><a href=/docs/v1.4/usecase/usage-example/>Usage Example</a></li></ul></li><li class=withchild id="cat_User Guides">User Guides<ul><li class=index><a href=/docs/v1.4/user-guides/configuration/>Configuration</a></li><li class=index><a href=/docs/v1.4/user-guides/sdks/>Sdks</a></li></ul></li><li class=withchild id=cat_Performance>Performance<ul><li class=index><a href=/docs/v1.4/performance/benchmark/>Benchmark</a></li><li class=index><a href=/docs/v1.4/performance/loadtest/>Loadtest</a></li></ul></li><li class=withchild id=cat_Api>API<ul><li class=index><a href=/docs/v1.4/api/insert/>Insert</a></li><li class=index><a href=/docs/v1.4/api/update/>Update</a></li><li class=index><a href=/docs/v1.4/api/upsert/>Upsert</a></li><li class=view><a href=/docs/v1.4/api/search/>Search</a></li><li class=index><a href=/docs/v1.4/api/remove/>Remove</a></li><li class=index><a href=/docs/v1.4/api/object/>Object</a></li><li class=index><a href=/docs/v1.4/api/build_proto/>Build Proto</a></li></ul></li><li class=withchild id=cat_Troubleshooting>Troubleshooting<ul></ul></li><li class=withchild id=cat_Contributing>Contributing<ul><li class=index><a href=/docs/v1.4/contributing/contributing-guide/>Contributing Guide</a></li><li class=index><a href=/docs/v1.4/contributing/coding-style/>Coding Style</a></li><li class=index><a href=/docs/v1.4/contributing/unit-test-guideline/>Unit Test Guideline</a></li></ul></li><li class=withchild id=cat_Support>Support<ul><li class=index><a href=/docs/v1.4/support/contacts/>Contacts</a></li></ul></li><li class=withchild id=cat_Release>Release<ul><li class=index><a href=/docs/v1.4/release/changelog/>Changelog</a></li></ul></li></ul></nav></aside><div class=content><div class=markdown id=markdown><h1 id=vald-search-apis>Vald Search APIs</h1><h2 id=overview>Overview</h2><p>Search Service is responsible for searching vectors from <code>vald-agent</code> which are similar to user request vector.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>service Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  rpc Search<span style=color:#f92672>(</span>payload.v1.Search.Request<span style=color:#f92672>)</span> returns <span style=color:#f92672>(</span>payload.v1.Search.Response<span style=color:#f92672>)</span> <span style=color:#f92672>{}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  rpc SearchByID<span style=color:#f92672>(</span>payload.v1.Search.IDRequest<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      returns <span style=color:#f92672>(</span>payload.v1.Search.Response<span style=color:#f92672>)</span> <span style=color:#f92672>{}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  rpc StreamSearch<span style=color:#f92672>(</span>stream payload.v1.Search.Request<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      returns <span style=color:#f92672>(</span>stream payload.v1.Search.StreamResponse<span style=color:#f92672>)</span> <span style=color:#f92672>{}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  rpc StreamSearchByID<span style=color:#f92672>(</span>stream payload.v1.Search.IDRequest<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      returns <span style=color:#f92672>(</span>stream payload.v1.Search.StreamResponse<span style=color:#f92672>)</span> <span style=color:#f92672>{}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  rpc MultiSearch<span style=color:#f92672>(</span>payload.v1.Search.MultiRequest<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      returns <span style=color:#f92672>(</span>payload.v1.Search.Responses<span style=color:#f92672>)</span> <span style=color:#f92672>{}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  rpc MultiSearchByID<span style=color:#f92672>(</span>payload.v1.Search.MultiIDRequest<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      returns <span style=color:#f92672>(</span>payload.v1.Search.Responses<span style=color:#f92672>)</span> <span style=color:#f92672>{}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  rpc LinearSearch<span style=color:#f92672>(</span>payload.v1.Search.Request<span style=color:#f92672>)</span> returns <span style=color:#f92672>(</span>payload.v1.Search.Response<span style=color:#f92672>)</span> <span style=color:#f92672>{}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  rpc LinearSearchByID<span style=color:#f92672>(</span>payload.v1.Search.IDRequest<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      returns <span style=color:#f92672>(</span>payload.v1.Search.Response<span style=color:#f92672>)</span> <span style=color:#f92672>{}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  rpc StreamLinearSearch<span style=color:#f92672>(</span>stream payload.v1.Search.Request<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      returns <span style=color:#f92672>(</span>stream payload.v1.Search.StreamResponse<span style=color:#f92672>)</span> <span style=color:#f92672>{}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  rpc StreamLinearSearchByID<span style=color:#f92672>(</span>stream payload.v1.Search.IDRequest<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      returns <span style=color:#f92672>(</span>stream payload.v1.Search.StreamResponse<span style=color:#f92672>)</span> <span style=color:#f92672>{}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  rpc MultiLinearSearch<span style=color:#f92672>(</span>payload.v1.Search.MultiRequest<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      returns <span style=color:#f92672>(</span>payload.v1.Search.Responses<span style=color:#f92672>)</span> <span style=color:#f92672>{}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  rpc MultiLinearSearchByID<span style=color:#f92672>(</span>payload.v1.Search.MultiIDRequest<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>      returns <span style=color:#f92672>(</span>payload.v1.Search.Responses<span style=color:#f92672>)</span> <span style=color:#f92672>{}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h2 id=search-rpc>Search RPC</h2><p>Search RPC is the method to search vector(s) similar to request vector.</p><h3 id=input>Input</h3><ul><li><p>the scheme of <code>payload.v1.Search.Request</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Request <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    repeated float vector <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>[</span> <span style=color:#f92672>(</span>validate.rules<span style=color:#f92672>)</span>.repeated .min_items <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>    Config config <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message Config <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    uint32 num <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>[</span> <span style=color:#f92672>(</span>validate.rules<span style=color:#f92672>)</span>.uint32.gte <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>    float radius <span style=color:#f92672>=</span> 3;
</span></span><span style=display:flex><span>    float epsilon <span style=color:#f92672>=</span> 4;
</span></span><span style=display:flex><span>    int64 timeout <span style=color:#f92672>=</span> 5;
</span></span><span style=display:flex><span>    Filter.Config ingress_filters <span style=color:#f92672>=</span> 6;
</span></span><span style=display:flex><span>    Filter.Config egress_filters <span style=color:#f92672>=</span> 7;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.Request</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>vector</td><td style=text-align:left>float</td><td style=text-align:left>repeated(Array[float])</td><td style=text-align:center>*</td><td style=text-align:left>the vector data. its dimension is between 2 and 65,536.</td></tr><tr><td style=text-align:center>config</td><td style=text-align:left>Config</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the configuration of the search request</td></tr></tbody></table></li><li><p>Search.Config</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>unique request ID</td></tr><tr><td style=text-align:center>num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the maximum number of result to be returned</td></tr><tr><td style=text-align:center>radius</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the search radius</td></tr><tr><td style=text-align:center>epsilon</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the search coefficient (default value is <code>0.1</code>)</td></tr><tr><td style=text-align:center>timeout</td><td style=text-align:left>int64</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Search timeout in nanoseconds (default value is <code>5s</code>)</td></tr><tr><td style=text-align:center>ingress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Ingress Filter configuration</td></tr><tr><td style=text-align:center>egress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Egress Filter configuration</td></tr><tr><td style=text-align:center>min_num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>the minimum number of result to be returned</td><td></td></tr></tbody></table></li></ul></li></ul><h3 id=output>Output</h3><ul><li><p>the scheme of <code>payload.v1.Search.Response</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Response <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    repeated Object.Distance results <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>message Object <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Distance <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    float distance <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.Response</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the unique request ID</td></tr><tr><td style=text-align:center>results</td><td style=text-align:left>Object.Distance</td><td style=text-align:left>repeated(Array[Object.Distance])</td><td style=text-align:left>search results</td></tr></tbody></table></li><li><p>Object.Distance</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the vector ID</td></tr><tr><td style=text-align:center>distance</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:left>the distance between result vector and request vector</td></tr></tbody></table></li></ul></li></ul><h3 id=status-code>Status Code</h3><table><thead><tr><th style=text-align:center>code</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>0</td><td style=text-align:left>OK</td></tr><tr><td style=text-align:center>3</td><td style=text-align:left>INVALID_ARGUMENT</td></tr><tr><td style=text-align:center>4</td><td style=text-align:left>DEADLINE_EXCEEDED</td></tr><tr><td style=text-align:center>5</td><td style=text-align:left>NOT_FOUND</td></tr></tbody></table><h2 id=searchbyid-rpc>SearchByID RPC</h2><p>SearchByID RPC it the method to search similar vectors using by user defined vector ID.<br>The vector with the same requested ID should be indexed into the <code>vald-agent</code> before searching.</p><h3 id=input-1>Input</h3><ul><li><p>the scheme of <code>payload.v1.Search.IDRequest</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message IDRequest <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    Config config <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message Config <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    uint32 num <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>[</span> <span style=color:#f92672>(</span>validate.rules<span style=color:#f92672>)</span>.uint32.gte <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>    float radius <span style=color:#f92672>=</span> 3;
</span></span><span style=display:flex><span>    float epsilon <span style=color:#f92672>=</span> 4;
</span></span><span style=display:flex><span>    int64 timeout <span style=color:#f92672>=</span> 5;
</span></span><span style=display:flex><span>    Filter.Config ingress_filters <span style=color:#f92672>=</span> 6;
</span></span><span style=display:flex><span>    Filter.Config egress_filters <span style=color:#f92672>=</span> 7;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.IDRequest</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the vector ID to be searched</td></tr><tr><td style=text-align:center>config</td><td style=text-align:left>Config</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the configuration of the search request</td></tr></tbody></table></li><li><p>Search.Config</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>unique request ID</td></tr><tr><td style=text-align:center>num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the maximum number of result to be returned</td></tr><tr><td style=text-align:center>radius</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the search radius</td></tr><tr><td style=text-align:center>epsilon</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the search coefficient (default value is <code>0.1</code>)</td></tr><tr><td style=text-align:center>timeout</td><td style=text-align:left>int64</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Search timeout in nanoseconds (default value is <code>5s</code>)</td></tr><tr><td style=text-align:center>ingress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Ingress Filter configuration</td></tr><tr><td style=text-align:center>egress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Egress Filter configuration</td></tr><tr><td style=text-align:center>min_num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>the minimum number of result to be returned</td><td></td></tr></tbody></table></li></ul></li></ul><h3 id=output-1>Output</h3><ul><li><p>the scheme of <code>payload.v1.Search.Response</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Response <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    repeated Object.Distance results <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>message Object <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Distance <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    float distance <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.Response</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the unique request ID</td></tr><tr><td style=text-align:center>results</td><td style=text-align:left>Object.Distance</td><td style=text-align:left>repeated(Array[Object.Distance])</td><td style=text-align:left>search results</td></tr></tbody></table></li><li><p>Object.Distance</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the vector ID</td></tr><tr><td style=text-align:center>distance</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:left>the distance between result vector and request vector</td></tr></tbody></table></li></ul></li></ul><h3 id=status-code-1>Status Code</h3><table><thead><tr><th style=text-align:center>code</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>0</td><td style=text-align:left>OK</td></tr><tr><td style=text-align:center>3</td><td style=text-align:left>INVALID_ARGUMENT</td></tr><tr><td style=text-align:center>4</td><td style=text-align:left>DEADLINE_EXCEEDED</td></tr><tr><td style=text-align:center>5</td><td style=text-align:left>NOT_FOUND</td></tr></tbody></table><h2 id=streamsearch-rpc>StreamSearch RPC</h2><p>StreamSearch RPC is the method to search vectors with multi queries(vectors) using the <a href=https://grpc.io/docs/what-is-grpc/core-concepts/#bidirectional-streaming-rpc>bidirectional streaming RPC</a>.<br>By using the bidirectional streaming RPC, the search request can be communicated in any order between client and server.
Each Search request and response are independent.</p><h3 id=input-2>Input</h3><ul><li><p>the scheme of <code>payload.v1.Search.Request stream</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    message Request <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      repeated float vector <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>[</span> <span style=color:#f92672>(</span>validate.rules<span style=color:#f92672>)</span>.repeated .min_items <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>      Config config <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    message Config <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>      uint32 num <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>[</span> <span style=color:#f92672>(</span>validate.rules<span style=color:#f92672>)</span>.uint32.gte <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>      float radius <span style=color:#f92672>=</span> 3;
</span></span><span style=display:flex><span>      float epsilon <span style=color:#f92672>=</span> 4;
</span></span><span style=display:flex><span>      int64 timeout <span style=color:#f92672>=</span> 5;
</span></span><span style=display:flex><span>      Filter.Config ingress_filters <span style=color:#f92672>=</span> 6;
</span></span><span style=display:flex><span>      Filter.Config egress_filters <span style=color:#f92672>=</span> 7;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.Request</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>vector</td><td style=text-align:left>float</td><td style=text-align:left>repeated(Array[float])</td><td style=text-align:center>*</td><td style=text-align:left>the vector data. its dimension is between 2 and 65,536.</td></tr><tr><td style=text-align:center>config</td><td style=text-align:left>Config</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the configuration of the search request</td></tr></tbody></table></li><li><p>Search.Config</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>unique request ID</td></tr><tr><td style=text-align:center>num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the maximum number of result to be returned</td></tr><tr><td style=text-align:center>radius</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the search radius</td></tr><tr><td style=text-align:center>epsilon</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the search coefficient (default value is <code>0.1</code>)</td></tr><tr><td style=text-align:center>timeout</td><td style=text-align:left>int64</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Search timeout in nanoseconds (default value is <code>5s</code>)</td></tr><tr><td style=text-align:center>ingress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Ingress Filter configuration</td></tr><tr><td style=text-align:center>egress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Egress Filter configuration</td></tr><tr><td style=text-align:center>min_num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>the minimum number of result to be returned</td><td></td></tr></tbody></table></li></ul></li></ul><h3 id=output-2>Output</h3><ul><li><p>the scheme of <code>payload.v1.Search.StreamResponse</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message StreamResponse <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    oneof payload <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      Response response <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>      google.rpc.Status status <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message Response <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    repeated Object.Distance results <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>message Object <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Distance <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    float distance <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.StreamResponse</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>response</td><td style=text-align:left>Response</td><td style=text-align:left></td><td style=text-align:left>the search result response</td></tr><tr><td style=text-align:center>status</td><td style=text-align:left>google.rpc.Status</td><td style=text-align:left></td><td style=text-align:left>the status of google RPC</td></tr></tbody></table></li><li><p>Search.Response</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the unique request ID</td></tr><tr><td style=text-align:center>results</td><td style=text-align:left>Object.Distance</td><td style=text-align:left>repeated(Array[Object.Distance])</td><td style=text-align:left>search results</td></tr></tbody></table></li><li><p>Object.Distance</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the vector ID</td></tr><tr><td style=text-align:center>distance</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:left>the distance between result vector and request vector</td></tr></tbody></table></li></ul></li></ul><h3 id=status-code-2>Status Code</h3><table><thead><tr><th style=text-align:center>code</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>0</td><td style=text-align:left>OK</td></tr><tr><td style=text-align:center>3</td><td style=text-align:left>INVALID_ARGUMENT</td></tr><tr><td style=text-align:center>4</td><td style=text-align:left>DEADLINE_EXCEEDED</td></tr><tr><td style=text-align:center>5</td><td style=text-align:left>NOT_FOUND</td></tr></tbody></table><h2 id=streamsearchbyid-rpc>StreamSearchByID RPC</h2><p>StreamSearchByID RPC is the method to search vectors with multi queries(IDs) using the <a href=https://grpc.io/docs/what-is-grpc/core-concepts/#bidirectional-streaming-rpc>bidirectional streaming RPC</a>.<br>By using the bidirectional streaming RPC, the search request can be communicated in any order between client and server.
Each SearchByID request and response are independent.</p><h3 id=input-3>Input</h3><ul><li><p>the scheme of <code>payload.v1.Search.IDRequest stream</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message IDRequest <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    Config config <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message Config <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    uint32 num <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>[</span> <span style=color:#f92672>(</span>validate.rules<span style=color:#f92672>)</span>.uint32.gte <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>    float radius <span style=color:#f92672>=</span> 3;
</span></span><span style=display:flex><span>    float epsilon <span style=color:#f92672>=</span> 4;
</span></span><span style=display:flex><span>    int64 timeout <span style=color:#f92672>=</span> 5;
</span></span><span style=display:flex><span>    Filter.Config ingress_filters <span style=color:#f92672>=</span> 6;
</span></span><span style=display:flex><span>    Filter.Config egress_filters <span style=color:#f92672>=</span> 7;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.IDRequest</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the vector ID to be searched</td></tr><tr><td style=text-align:center>config</td><td style=text-align:left>Config</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the configuration of the search request</td></tr></tbody></table></li><li><p>Search.Config</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>unique request ID</td></tr><tr><td style=text-align:center>num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the maximum number of result to be returned</td></tr><tr><td style=text-align:center>radius</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the search radius</td></tr><tr><td style=text-align:center>epsilon</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the search coefficient (default value is <code>0.1</code>)</td></tr><tr><td style=text-align:center>timeout</td><td style=text-align:left>int64</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Search timeout in nanoseconds (default value is <code>5s</code>)</td></tr><tr><td style=text-align:center>ingress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Ingress Filter configuration</td></tr><tr><td style=text-align:center>egress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Egress Filter configuration</td></tr><tr><td style=text-align:center>min_num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>the minimum number of result to be returned</td><td></td></tr></tbody></table></li></ul></li></ul><h3 id=output-3>Output</h3><ul><li><p>the scheme of <code>payload.v1.Search.StreamResponse</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message StreamResponse <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    oneof payload <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      Response response <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>      google.rpc.Status status <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message Response <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    repeated Object.Distance results <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>message Object <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Distance <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    float distance <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.StreamResponse</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>response</td><td style=text-align:left>Response</td><td style=text-align:left></td><td style=text-align:left>the search result response</td></tr><tr><td style=text-align:center>status</td><td style=text-align:left>google.rpc.Status</td><td style=text-align:left></td><td style=text-align:left>the status of google RPC</td></tr></tbody></table></li><li><p>Search.Response</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the unique request ID</td></tr><tr><td style=text-align:center>results</td><td style=text-align:left>Object.Distance</td><td style=text-align:left>repeated(Array[Object.Distance])</td><td style=text-align:left>search results</td></tr></tbody></table></li><li><p>Object.Distance</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the vector ID</td></tr><tr><td style=text-align:center>distance</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:left>the distance between result vector and request vector</td></tr></tbody></table></li></ul></li></ul><h3 id=status-code-3>Status Code</h3><table><thead><tr><th style=text-align:center>code</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>0</td><td style=text-align:left>OK</td></tr><tr><td style=text-align:center>3</td><td style=text-align:left>INVALID_ARGUMENT</td></tr><tr><td style=text-align:center>4</td><td style=text-align:left>DEADLINE_EXCEEDED</td></tr><tr><td style=text-align:center>5</td><td style=text-align:left>NOT_FOUND</td></tr></tbody></table><h2 id=multisearch-rpc>MultiSearch RPC</h2><p>MultiSearch RPC is the method to search vectors with multiple vectors in <strong>1</strong> request.</p><div class=card-note>gRPC has the message size limitation.<br>Please be careful that the size of the request exceed the limit.</div><h3 id=input-4>Input</h3><ul><li><p>the scheme of <code>payload.v1.Search.MultiRequest</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message MultiRequest <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    repeated Request requests <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message Request <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    repeated float vector <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>[</span> <span style=color:#f92672>(</span>validate.rules<span style=color:#f92672>)</span>.repeated .min_items <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>    Config config <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message Config <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    uint32 num <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>[</span> <span style=color:#f92672>(</span>validate.rules<span style=color:#f92672>)</span>.uint32.gte <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>    float radius <span style=color:#f92672>=</span> 3;
</span></span><span style=display:flex><span>    float epsilon <span style=color:#f92672>=</span> 4;
</span></span><span style=display:flex><span>    int64 timeout <span style=color:#f92672>=</span> 5;
</span></span><span style=display:flex><span>    Filter.Config ingress_filters <span style=color:#f92672>=</span> 6;
</span></span><span style=display:flex><span>    Filter.Config egress_filters <span style=color:#f92672>=</span> 7;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.MultiRequest</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>requests</td><td style=text-align:left>repeated(Array[Request])</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the search request list</td></tr></tbody></table></li><li><p>Search.Request</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>vector</td><td style=text-align:left>float</td><td style=text-align:left>repeated(Array[float])</td><td style=text-align:center>*</td><td style=text-align:left>the vector data. its dimension is between 2 and 65,536.</td></tr><tr><td style=text-align:center>config</td><td style=text-align:left>Config</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the configuration of the search request</td></tr></tbody></table></li><li><p>Search.Config</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>unique request ID</td></tr><tr><td style=text-align:center>num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the maximum number of result to be returned</td></tr><tr><td style=text-align:center>radius</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the search radius</td></tr><tr><td style=text-align:center>epsilon</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the search coefficient (default value is <code>0.1</code>)</td></tr><tr><td style=text-align:center>timeout</td><td style=text-align:left>int64</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Search timeout in nanoseconds (default value is <code>5s</code>)</td></tr><tr><td style=text-align:center>ingress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Ingress Filter configuration</td></tr><tr><td style=text-align:center>egress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Egress Filter configuration</td></tr><tr><td style=text-align:center>min_num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>the minimum number of result to be returned</td><td></td></tr></tbody></table></li></ul></li></ul><h3 id=output-4>Output</h3><ul><li><p>the scheme of <code>payload.v1.Search.Responses</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Responses <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    repeated Response responses <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message Response <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    repeated Object.Distance results <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>message Object <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Distance <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    float distance <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.Responses</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>responses</td><td style=text-align:left>Response</td><td style=text-align:left>repeated(Array[Response])</td><td style=text-align:left>the list of search results response</td></tr></tbody></table></li><li><p>Search.Response</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the unique request ID</td></tr><tr><td style=text-align:center>results</td><td style=text-align:left>Object.Distance</td><td style=text-align:left>repeated(Array[Object.Distance])</td><td style=text-align:left>search results</td></tr></tbody></table></li><li><p>Object.Distance</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the vector ID</td></tr><tr><td style=text-align:center>distance</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:left>the distance between result vector and request vector</td></tr></tbody></table></li></ul></li></ul><h3 id=status-code-4>Status Code</h3><table><thead><tr><th style=text-align:center>code</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>0</td><td style=text-align:left>OK</td></tr><tr><td style=text-align:center>3</td><td style=text-align:left>INVALID_ARGUMENT</td></tr><tr><td style=text-align:center>4</td><td style=text-align:left>DEADLINE_EXCEEDED</td></tr><tr><td style=text-align:center>5</td><td style=text-align:left>NOT_FOUND</td></tr></tbody></table><h3 id=multisearchbyid-rpc>MultiSearchByID RPC</h3><p>MultiSearchByID RPC is the method to search vectors with multiple IDs in <strong>1</strong> request.</p><div class=card-note>gRPC has the message size limitation.<br>Please be careful that the size of the request exceed the limit.</div><h3 id=input-5>Input</h3><ul><li><p>the scheme of <code>payload.v1.Search.MultiIDRequest stream</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message MultiIDRequest <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      repeated IDRequest requests <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message IDRequest <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    Config config <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message Config <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    uint32 num <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>[</span> <span style=color:#f92672>(</span>validate.rules<span style=color:#f92672>)</span>.uint32.gte <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>    float radius <span style=color:#f92672>=</span> 3;
</span></span><span style=display:flex><span>    float epsilon <span style=color:#f92672>=</span> 4;
</span></span><span style=display:flex><span>    int64 timeout <span style=color:#f92672>=</span> 5;
</span></span><span style=display:flex><span>    Filter.Config ingress_filters <span style=color:#f92672>=</span> 6;
</span></span><span style=display:flex><span>    Filter.Config egress_filters <span style=color:#f92672>=</span> 7;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.MultiIDRequest</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>requests</td><td style=text-align:left>IDRequest</td><td style=text-align:left>repeated(Array[IDRequest])</td><td style=text-align:center>*</td><td style=text-align:left>the searchByID request list</td></tr></tbody></table></li><li><p>Search.IDRequest</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the vector ID to be searched</td></tr><tr><td style=text-align:center>config</td><td style=text-align:left>Config</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the configuration of the search request</td></tr></tbody></table></li><li><p>Search.Config</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>unique request ID</td></tr><tr><td style=text-align:center>num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the maximum number of result to be returned</td></tr><tr><td style=text-align:center>radius</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the search radius</td></tr><tr><td style=text-align:center>epsilon</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the search coefficient (default value is <code>0.1</code>)</td></tr><tr><td style=text-align:center>timeout</td><td style=text-align:left>int64</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Search timeout in nanoseconds (default value is <code>5s</code>)</td></tr><tr><td style=text-align:center>ingress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Ingress Filter configuration</td></tr><tr><td style=text-align:center>egress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Egress Filter configuration</td></tr><tr><td style=text-align:center>min_num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>the minimum number of result to be returned</td><td></td></tr></tbody></table></li></ul></li></ul><h3 id=output-5>Output</h3><ul><li><p>the scheme of <code>payload.v1.Search.Responses</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Responses <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    repeated Response responses <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message Response <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    repeated Object.Distance results <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>message Object <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Distance <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    float distance <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.Responses</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>responses</td><td style=text-align:left>Response</td><td style=text-align:left>repeated(Array[Response])</td><td style=text-align:left>the list of search results response</td></tr></tbody></table></li><li><p>Search.Response</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the unique request ID</td></tr><tr><td style=text-align:center>results</td><td style=text-align:left>Object.Distance</td><td style=text-align:left>repeated(Array[Object.Distance])</td><td style=text-align:left>search results</td></tr></tbody></table></li><li><p>Object.Distance</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the vector ID</td></tr><tr><td style=text-align:center>distance</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:left>the distance between result vector and request vector</td></tr></tbody></table></li></ul></li></ul><h3 id=status-code-5>Status Code</h3><table><thead><tr><th style=text-align:center>code</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>0</td><td style=text-align:left>OK</td></tr><tr><td style=text-align:center>3</td><td style=text-align:left>INVALID_ARGUMENT</td></tr><tr><td style=text-align:center>4</td><td style=text-align:left>DEADLINE_EXCEEDED</td></tr><tr><td style=text-align:center>5</td><td style=text-align:left>NOT_FOUND</td></tr></tbody></table><h2 id=linearsearch-rpc>LinearSearch RPC</h2><p>LinearSearch RPC is the method to linear search vector(s) similar to request vector.</p><h3 id=input-6>Input</h3><ul><li><p>the scheme of <code>payload.v1.Search.Request</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Request <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    repeated float vector <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>[</span> <span style=color:#f92672>(</span>validate.rules<span style=color:#f92672>)</span>.repeated .min_items <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>    Config config <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message Config <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    uint32 num <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>[</span> <span style=color:#f92672>(</span>validate.rules<span style=color:#f92672>)</span>.uint32.gte <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>    int64 timeout <span style=color:#f92672>=</span> 5;
</span></span><span style=display:flex><span>    Filter.Config ingress_filters <span style=color:#f92672>=</span> 6;
</span></span><span style=display:flex><span>    Filter.Config egress_filters <span style=color:#f92672>=</span> 7;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.Request</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>vector</td><td style=text-align:left>float</td><td style=text-align:left>repeated(Array[float])</td><td style=text-align:center>*</td><td style=text-align:left>the vector data. its dimension is between 2 and 65,536.</td></tr><tr><td style=text-align:center>config</td><td style=text-align:left>Config</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the configuration of the search request</td></tr></tbody></table></li><li><p>Search.Config</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>unique request ID</td></tr><tr><td style=text-align:center>num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the maximum number of result to be returned</td></tr><tr><td style=text-align:center>timeout</td><td style=text-align:left>int64</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Search timeout in nanoseconds (default value is <code>5s</code>)</td></tr><tr><td style=text-align:center>ingress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Ingress Filter configuration</td></tr><tr><td style=text-align:center>egress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Egress Filter configuration</td></tr><tr><td style=text-align:center>min_num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>the minimum number of result to be returned</td><td></td></tr></tbody></table></li></ul></li></ul><h3 id=output-6>Output</h3><ul><li><p>the scheme of <code>payload.v1.Search.Response</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Response <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    repeated Object.Distance results <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>message Object <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Distance <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    float distance <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.Response</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the unique request ID</td></tr><tr><td style=text-align:center>results</td><td style=text-align:left>Object.Distance</td><td style=text-align:left>repeated(Array[Object.Distance])</td><td style=text-align:left>search results</td></tr></tbody></table></li><li><p>Object.Distance</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the vector ID</td></tr><tr><td style=text-align:center>distance</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:left>the distance between result vector and request vector</td></tr></tbody></table></li></ul></li></ul><h3 id=status-code-6>Status Code</h3><table><thead><tr><th style=text-align:center>code</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>0</td><td style=text-align:left>OK</td></tr><tr><td style=text-align:center>3</td><td style=text-align:left>INVALID_ARGUMENT</td></tr><tr><td style=text-align:center>4</td><td style=text-align:left>DEADLINE_EXCEEDED</td></tr><tr><td style=text-align:center>5</td><td style=text-align:left>NOT_FOUND</td></tr></tbody></table><h2 id=linearsearchbyid-rpc>LinearSearchByID RPC</h2><p>LinearSearchByID RPC is the method to linear search similar vectors using by user defined vector ID.<br>The vector with the same requested ID should be indexed into the <code>vald-agent</code> before searching.
If the vector doesn&rsquo;t be stored, you will get a <code>NOT_FOUND</code> error as a result.</p><h3 id=input-7>Input</h3><ul><li><p>the scheme of <code>payload.v1.Search.IDRequest</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message IDRequest <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    Config config <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message Config <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    uint32 num <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>[</span> <span style=color:#f92672>(</span>validate.rules<span style=color:#f92672>)</span>.uint32.gte <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>    int64 timeout <span style=color:#f92672>=</span> 5;
</span></span><span style=display:flex><span>    Filter.Config ingress_filters <span style=color:#f92672>=</span> 6;
</span></span><span style=display:flex><span>    Filter.Config egress_filters <span style=color:#f92672>=</span> 7;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.IDRequest</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the vector ID to be searched</td></tr><tr><td style=text-align:center>config</td><td style=text-align:left>Config</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the configuration of the search request</td></tr></tbody></table></li><li><p>Search.Config</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>unique request ID</td></tr><tr><td style=text-align:center>num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the maximum number of result to be returned</td></tr><tr><td style=text-align:center>timeout</td><td style=text-align:left>int64</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Search timeout in nanoseconds (default value is <code>5s</code>)</td></tr><tr><td style=text-align:center>ingress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Ingress Filter configuration</td></tr><tr><td style=text-align:center>egress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Egress Filter configuration</td></tr><tr><td style=text-align:center>min_num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>the minimum number of result to be returned</td><td></td></tr></tbody></table></li></ul></li></ul><h3 id=output-7>Output</h3><ul><li><p>the scheme of <code>payload.v1.Search.Response</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Response <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    repeated Object.Distance results <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>message Object <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Distance <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    float distance <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.Response</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the unique request ID</td></tr><tr><td style=text-align:center>results</td><td style=text-align:left>Object.Distance</td><td style=text-align:left>repeated(Array[Object.Distance])</td><td style=text-align:left>search results</td></tr></tbody></table></li><li><p>Object.Distance</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the vector ID</td></tr><tr><td style=text-align:center>distance</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:left>the distance between result vector and request vector</td></tr></tbody></table></li></ul></li></ul><h3 id=status-code-7>Status Code</h3><table><thead><tr><th style=text-align:center>code</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>0</td><td style=text-align:left>OK</td></tr><tr><td style=text-align:center>3</td><td style=text-align:left>INVALID_ARGUMENT</td></tr><tr><td style=text-align:center>4</td><td style=text-align:left>DEADLINE_EXCEEDED</td></tr><tr><td style=text-align:center>5</td><td style=text-align:left>NOT_FOUND</td></tr></tbody></table><h2 id=streamlinearsearch-rpc>StreamLinearSearch RPC</h2><p>StreamLinearSearch RPC is the method to linear search vectors with multi queries(vectors) using the <a href=https://grpc.io/docs/what-is-grpc/core-concepts/#bidirectional-streaming-rpc>bidirectional streaming RPC</a>.<br>By using the bidirectional streaming RPC, the linear search request can be communicated in any order between client and server.
Each LinearSearch request and response are independent.</p><h3 id=input-8>Input</h3><ul><li><p>the scheme of <code>payload.v1.Search.Request stream</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    message Request <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      repeated float vector <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>[</span> <span style=color:#f92672>(</span>validate.rules<span style=color:#f92672>)</span>.repeated .min_items <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>      Config config <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    message Config <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>      uint32 num <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>[</span> <span style=color:#f92672>(</span>validate.rules<span style=color:#f92672>)</span>.uint32.gte <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>      int64 timeout <span style=color:#f92672>=</span> 5;
</span></span><span style=display:flex><span>      Filter.Config ingress_filters <span style=color:#f92672>=</span> 6;
</span></span><span style=display:flex><span>      Filter.Config egress_filters <span style=color:#f92672>=</span> 7;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.Request</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>vector</td><td style=text-align:left>float</td><td style=text-align:left>repeated(Array[float])</td><td style=text-align:center>*</td><td style=text-align:left>the vector data. its dimension is between 2 and 65,536.</td></tr><tr><td style=text-align:center>config</td><td style=text-align:left>Config</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the configuration of the search request</td></tr></tbody></table></li><li><p>Search.Config</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>unique request ID</td></tr><tr><td style=text-align:center>num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the maximum number of result to be returned</td></tr><tr><td style=text-align:center>timeout</td><td style=text-align:left>int64</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Search timeout in nanoseconds (default value is <code>5s</code>)</td></tr><tr><td style=text-align:center>ingress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Ingress Filter configuration</td></tr><tr><td style=text-align:center>egress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Egress Filter configuration</td></tr><tr><td style=text-align:center>min_num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>the minimum number of result to be returned</td><td></td></tr></tbody></table></li></ul></li></ul><h3 id=output-8>Output</h3><ul><li><p>the scheme of <code>payload.v1.Search.StreamResponse</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message StreamResponse <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    oneof payload <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      Response response <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>      google.rpc.Status status <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message Response <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    repeated Object.Distance results <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>message Object <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Distance <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    float distance <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.StreamResponse</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>response</td><td style=text-align:left>Response</td><td style=text-align:left></td><td style=text-align:left>the search result response</td></tr><tr><td style=text-align:center>status</td><td style=text-align:left>google.rpc.Status</td><td style=text-align:left></td><td style=text-align:left>the status of google RPC</td></tr></tbody></table></li><li><p>Search.Response</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the unique request ID</td></tr><tr><td style=text-align:center>results</td><td style=text-align:left>Object.Distance</td><td style=text-align:left>repeated(Array[Object.Distance])</td><td style=text-align:left>search results</td></tr></tbody></table></li><li><p>Object.Distance</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the vector ID</td></tr><tr><td style=text-align:center>distance</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:left>the distance between result vector and request vector</td></tr></tbody></table></li></ul></li></ul><h3 id=status-code-8>Status Code</h3><table><thead><tr><th style=text-align:center>code</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>0</td><td style=text-align:left>OK</td></tr><tr><td style=text-align:center>3</td><td style=text-align:left>INVALID_ARGUMENT</td></tr><tr><td style=text-align:center>4</td><td style=text-align:left>DEADLINE_EXCEEDED</td></tr><tr><td style=text-align:center>5</td><td style=text-align:left>NOT_FOUND</td></tr></tbody></table><h2 id=streamlinearsearchbyid-rpc>StreamLinearSearchByID RPC</h2><p>StreamLinearSearchByID RPC is the method to linear search vectors with multi queries(IDs) using the <a href=https://grpc.io/docs/what-is-grpc/core-concepts/#bidirectional-streaming-rpc>bidirectional streaming RPC</a>.<br>By using the bidirectional streaming RPC, the linear search request can be communicated in any order between client and server.
Each LinearSearchByID request and response are independent.</p><h3 id=input-9>Input</h3><ul><li><p>the scheme of <code>payload.v1.Search.IDRequest stream</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message IDRequest <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    Config config <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message Config <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    uint32 num <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>[</span> <span style=color:#f92672>(</span>validate.rules<span style=color:#f92672>)</span>.uint32.gte <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>    int64 timeout <span style=color:#f92672>=</span> 5;
</span></span><span style=display:flex><span>    Filter.Config ingress_filters <span style=color:#f92672>=</span> 6;
</span></span><span style=display:flex><span>    Filter.Config egress_filters <span style=color:#f92672>=</span> 7;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.IDRequest</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the vector ID to be searched</td></tr><tr><td style=text-align:center>config</td><td style=text-align:left>Config</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the configuration of the search request</td></tr></tbody></table></li><li><p>Search.Config</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>unique request ID</td></tr><tr><td style=text-align:center>num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the maximum number of result to be returned</td></tr><tr><td style=text-align:center>timeout</td><td style=text-align:left>int64</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Search timeout in nanoseconds (default value is <code>5s</code>)</td></tr><tr><td style=text-align:center>ingress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Ingress Filter configuration</td></tr><tr><td style=text-align:center>egress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Egress Filter configuration</td></tr><tr><td style=text-align:center>min_num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>the minimum number of result to be returned</td><td></td></tr></tbody></table></li></ul></li></ul><h3 id=output-9>Output</h3><ul><li><p>the scheme of <code>payload.v1.Search.StreamResponse</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message StreamResponse <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    oneof payload <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      Response response <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>      google.rpc.Status status <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message Response <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    repeated Object.Distance results <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>message Object <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Distance <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    float distance <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.StreamResponse</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>response</td><td style=text-align:left>Response</td><td style=text-align:left></td><td style=text-align:left>the search result response</td></tr><tr><td style=text-align:center>status</td><td style=text-align:left>google.rpc.Status</td><td style=text-align:left></td><td style=text-align:left>the status of google RPC</td></tr></tbody></table></li><li><p>Search.Response</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the unique request ID</td></tr><tr><td style=text-align:center>results</td><td style=text-align:left>Object.Distance</td><td style=text-align:left>repeated(Array[Object.Distance])</td><td style=text-align:left>search results</td></tr></tbody></table></li><li><p>Object.Distance</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the vector ID</td></tr><tr><td style=text-align:center>distance</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:left>the distance between result vector and request vector</td></tr></tbody></table></li></ul></li></ul><h3 id=status-code-9>Status Code</h3><table><thead><tr><th style=text-align:center>code</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>0</td><td style=text-align:left>OK</td></tr><tr><td style=text-align:center>3</td><td style=text-align:left>INVALID_ARGUMENT</td></tr><tr><td style=text-align:center>4</td><td style=text-align:left>DEADLINE_EXCEEDED</td></tr><tr><td style=text-align:center>5</td><td style=text-align:left>NOT_FOUND</td></tr></tbody></table><h2 id=multilinearsearch-rpc>MultiLinearSearch RPC</h2><p>MultiLinearSearch RPC is the method to linear search vectors with multiple vectors in <strong>1</strong> request.</p><div class=card-note>gRPC has the message size limitation.<br>Please be careful that the size of the request exceed the limit.</div><h3 id=input-10>Input</h3><ul><li><p>the scheme of <code>payload.v1.Search.MultiRequest</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message MultiRequest <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    repeated Request requests <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message Request <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    repeated float vector <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>[</span> <span style=color:#f92672>(</span>validate.rules<span style=color:#f92672>)</span>.repeated .min_items <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>    Config config <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message Config <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    uint32 num <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>[</span> <span style=color:#f92672>(</span>validate.rules<span style=color:#f92672>)</span>.uint32.gte <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>    int64 timeout <span style=color:#f92672>=</span> 5;
</span></span><span style=display:flex><span>    Filter.Config ingress_filters <span style=color:#f92672>=</span> 6;
</span></span><span style=display:flex><span>    Filter.Config egress_filters <span style=color:#f92672>=</span> 7;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.MultiRequest</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>requests</td><td style=text-align:left>repeated(Array[Request])</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the search request list</td></tr></tbody></table></li><li><p>Search.Request</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>vector</td><td style=text-align:left>float</td><td style=text-align:left>repeated(Array[float])</td><td style=text-align:center>*</td><td style=text-align:left>the vector data. its dimension is between 2 and 65,536.</td></tr><tr><td style=text-align:center>config</td><td style=text-align:left>Config</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the configuration of the search request</td></tr></tbody></table></li><li><p>Search.Config</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>unique request ID</td></tr><tr><td style=text-align:center>num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the maximum number of result to be returned</td></tr><tr><td style=text-align:center>timeout</td><td style=text-align:left>int64</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Search timeout in nanoseconds (default value is <code>5s</code>)</td></tr><tr><td style=text-align:center>ingress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Ingress Filter configuration</td></tr><tr><td style=text-align:center>egress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Egress Filter configuration</td></tr><tr><td style=text-align:center>min_num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>the minimum number of result to be returned</td><td></td></tr></tbody></table></li></ul></li></ul><h3 id=output-10>Output</h3><ul><li><p>the scheme of <code>payload.v1.Search.Responses</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Responses <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    repeated Response responses <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message Response <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    repeated Object.Distance results <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>message Object <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Distance <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    float distance <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.Responses</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>responses</td><td style=text-align:left>Response</td><td style=text-align:left>repeated(Array[Response])</td><td style=text-align:left>the list of search results response</td></tr></tbody></table></li><li><p>Search.Response</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the unique request ID</td></tr><tr><td style=text-align:center>results</td><td style=text-align:left>Object.Distance</td><td style=text-align:left>repeated(Array[Object.Distance])</td><td style=text-align:left>search results</td></tr></tbody></table></li><li><p>Object.Distance</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the vector ID</td></tr><tr><td style=text-align:center>distance</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:left>the distance between result vector and request vector</td></tr></tbody></table></li></ul></li></ul><h3 id=status-code-10>Status Code</h3><table><thead><tr><th style=text-align:center>code</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>0</td><td style=text-align:left>OK</td></tr><tr><td style=text-align:center>3</td><td style=text-align:left>INVALID_ARGUMENT</td></tr><tr><td style=text-align:center>4</td><td style=text-align:left>DEADLINE_EXCEEDED</td></tr><tr><td style=text-align:center>5</td><td style=text-align:left>NOT_FOUND</td></tr></tbody></table><h3 id=multilinearsearchbyid-rpc>MultiLinearSearchByID RPC</h3><p>MultiLinearSearchByID RPC is the method to linear search vectors with multiple IDs in <strong>1</strong> request.</p><div class=card-note>gRPC has the message size limitation.<br>Please be careful that the size of the request exceed the limit.</div><h3 id=input-11>Input</h3><ul><li><p>the scheme of <code>payload.v1.Search.MultiIDRequest stream</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message MultiIDRequest <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>      repeated IDRequest requests <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message IDRequest <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    Config config <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message Config <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    uint32 num <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>[</span> <span style=color:#f92672>(</span>validate.rules<span style=color:#f92672>)</span>.uint32.gte <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>]</span>;
</span></span><span style=display:flex><span>    int64 timeout <span style=color:#f92672>=</span> 5;
</span></span><span style=display:flex><span>    Filter.Config ingress_filters <span style=color:#f92672>=</span> 6;
</span></span><span style=display:flex><span>    Filter.Config egress_filters <span style=color:#f92672>=</span> 7;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.MultiIDRequest</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>requests</td><td style=text-align:left>IDRequest</td><td style=text-align:left>repeated(Array[IDRequest])</td><td style=text-align:center>*</td><td style=text-align:left>the searchByID request list</td></tr></tbody></table></li><li><p>Search.IDRequest</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the vector ID to be searched.</td></tr><tr><td style=text-align:center>config</td><td style=text-align:left>Config</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the configuration of the search request</td></tr></tbody></table></li><li><p>Search.Config</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:center>required</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>unique request ID</td></tr><tr><td style=text-align:center>num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>*</td><td style=text-align:left>the maximum number of result to be returned</td></tr><tr><td style=text-align:center>timeout</td><td style=text-align:left>int64</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Search timeout in nanoseconds (default value is <code>5s</code>)</td></tr><tr><td style=text-align:center>ingress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Ingress Filter configuration</td></tr><tr><td style=text-align:center>egress_filters</td><td style=text-align:left>Filter.Config</td><td style=text-align:left></td><td style=text-align:center></td><td style=text-align:left>Egress Filter configuration</td></tr><tr><td style=text-align:center>min_num</td><td style=text-align:left>uint32</td><td style=text-align:left></td><td style=text-align:center>the minimum number of result to be returned</td><td></td></tr></tbody></table></li></ul></li></ul><h3 id=output-11>Output</h3><ul><li><p>the scheme of <code>payload.v1.Search.Responses</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>message Search <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Responses <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    repeated Response responses <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  message Response <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string request_id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    repeated Object.Distance results <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>message Object <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  message Distance <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    string id <span style=color:#f92672>=</span> 1;
</span></span><span style=display:flex><span>    float distance <span style=color:#f92672>=</span> 2;
</span></span><span style=display:flex><span>  <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><ul><li><p>Search.Responses</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>responses</td><td style=text-align:left>Response</td><td style=text-align:left>repeated(Array[Response])</td><td style=text-align:left>the list of search results response</td></tr></tbody></table></li><li><p>Search.Response</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>request_id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the unique request ID</td></tr><tr><td style=text-align:center>results</td><td style=text-align:left>Object.Distance</td><td style=text-align:left>repeated(Array[Object.Distance])</td><td style=text-align:left>search results</td></tr></tbody></table></li><li><p>Object.Distance</p><table><thead><tr><th style=text-align:center>field</th><th style=text-align:left>type</th><th style=text-align:left>label</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>id</td><td style=text-align:left>string</td><td style=text-align:left></td><td style=text-align:left>the vector ID</td></tr><tr><td style=text-align:center>distance</td><td style=text-align:left>float</td><td style=text-align:left></td><td style=text-align:left>the distance between result vector and request vector</td></tr></tbody></table></li></ul></li></ul><h3 id=status-code-11>Status Code</h3><table><thead><tr><th style=text-align:center>code</th><th style=text-align:left>desc.</th></tr></thead><tbody><tr><td style=text-align:center>0</td><td style=text-align:left>OK</td></tr><tr><td style=text-align:center>3</td><td style=text-align:left>INVALID_ARGUMENT</td></tr><tr><td style=text-align:center>4</td><td style=text-align:left>DEADLINE_EXCEEDED</td></tr><tr><td style=text-align:center>5</td><td style=text-align:left>NOT_FOUND</td></tr></tbody></table></div><aside class=current id=current><button class=menu><span class=dot></span></button><nav id=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#search-rpc>Search RPC</a><ul><li><a href=#input>Input</a></li><li><a href=#output>Output</a></li><li><a href=#status-code>Status Code</a></li></ul></li><li><a href=#searchbyid-rpc>SearchByID RPC</a><ul><li><a href=#input-1>Input</a></li><li><a href=#output-1>Output</a></li><li><a href=#status-code-1>Status Code</a></li></ul></li><li><a href=#streamsearch-rpc>StreamSearch RPC</a><ul><li><a href=#input-2>Input</a></li><li><a href=#output-2>Output</a></li><li><a href=#status-code-2>Status Code</a></li></ul></li><li><a href=#streamsearchbyid-rpc>StreamSearchByID RPC</a><ul><li><a href=#input-3>Input</a></li><li><a href=#output-3>Output</a></li><li><a href=#status-code-3>Status Code</a></li></ul></li><li><a href=#multisearch-rpc>MultiSearch RPC</a><ul><li><a href=#input-4>Input</a></li><li><a href=#output-4>Output</a></li><li><a href=#status-code-4>Status Code</a></li><li><a href=#multisearchbyid-rpc>MultiSearchByID RPC</a></li><li><a href=#input-5>Input</a></li><li><a href=#output-5>Output</a></li><li><a href=#status-code-5>Status Code</a></li></ul></li><li><a href=#linearsearch-rpc>LinearSearch RPC</a><ul><li><a href=#input-6>Input</a></li><li><a href=#output-6>Output</a></li><li><a href=#status-code-6>Status Code</a></li></ul></li><li><a href=#linearsearchbyid-rpc>LinearSearchByID RPC</a><ul><li><a href=#input-7>Input</a></li><li><a href=#output-7>Output</a></li><li><a href=#status-code-7>Status Code</a></li></ul></li><li><a href=#streamlinearsearch-rpc>StreamLinearSearch RPC</a><ul><li><a href=#input-8>Input</a></li><li><a href=#output-8>Output</a></li><li><a href=#status-code-8>Status Code</a></li></ul></li><li><a href=#streamlinearsearchbyid-rpc>StreamLinearSearchByID RPC</a><ul><li><a href=#input-9>Input</a></li><li><a href=#output-9>Output</a></li><li><a href=#status-code-9>Status Code</a></li></ul></li><li><a href=#multilinearsearch-rpc>MultiLinearSearch RPC</a><ul><li><a href=#input-10>Input</a></li><li><a href=#output-10>Output</a></li><li><a href=#status-code-10>Status Code</a></li><li><a href=#multilinearsearchbyid-rpc>MultiLinearSearchByID RPC</a></li><li><a href=#input-11>Input</a></li><li><a href=#output-11>Output</a></li><li><a href=#status-code-11>Status Code</a></li></ul></li></ul></nav></aside></div></div></main><footer class=footer><div class=footer__content><ul class=footer__index><li class=footer__item><a href=/docs/v1.4/overview/about-vald class=footer__link>About<br></a></li><li class=footer__item><a href=/docs/v1.4/tutorial/get-started class=footer__link>Get Started<br></a></li><li class=footer__item><a href=/docs/v1.4/user-guides/sdks class=footer__link>SDKs</a></li><li class=footer__item><a href=/docs/v1.4 class=footer__link>Docs</a></li><li class=footer__item><a href=https://vdaas-vald.medium.com/ target=_blank class=footer__link>Blog<br></a></li></ul><ul class=footer__sns><li class=footer__item><a class="footer__item footer__icon" href=https://x.com/vdaas_vald target=_blank><picture><source srcset=https://vald.vdaas.org//images/logo_x_white.svg media="(prefers-color-scheme: dark)" class=icon__image width=24 height=24><img src=https://vald.vdaas.org//images/logo_x_black.svg alt=x class=icon__image></picture></a></li><li class=footer__item><a class="footer__item footer__icon" href=https://join.slack.com/t/vald-community/shared_invite/zt-db2ky9o4-R_9p2sVp8xRwztVa8gfnPA target=_blank><picture><source srcset=https://vald.vdaas.org//images/logo_slack_white.svg media="(prefers-color-scheme: dark)" class=icon__image width=24 height=24><img src=https://vald.vdaas.org//images/logo_slack_black.svg alt=slack class=icon__image></picture></a></li><li class=footer__item><a class="footer__item footer__icon" href=https://github.com/vdaas/vald target=_blank><picture><source srcset=https://vald.vdaas.org//images/logo_github_white.svg media="(prefers-color-scheme: dark)" class=icon__image width=24 height=24><img src=https://vald.vdaas.org//images/logo_github_black.svg alt=github class=icon__image></picture></a></li></ul></div><p class=footer__copylight>©2019-2022 vald.vdaas.org Vald team</p></footer></body></html>