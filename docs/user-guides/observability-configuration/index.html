<!doctype html><html><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-F9Y0YKG55S"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-F9Y0YKG55S")</script><link rel=canonical href=https://vald.vdaas.org><meta charset=utf-8><meta name=viewport content="width=device-width"><meta name=robots content='index, follow'><title>Vald | Observability Configuration</title>
<meta name=description content="Vald is high scalable distributed high-speed approximate nearest neighbor search engine" }><meta name=format-detection content="telephone=no"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta property="og:type" content="article"><meta property="og:title" content="Vald | Observability Configuration"><meta property="og:description" content="Vald is high scalable distributed high-speed approximate nearest neighbor search engine"><meta property="og:url" content="https://vald.vdaas.org/docs/user-guides/observability-configuration/"><meta property="og:image" content="https://vald.vdaas.org//images/ogp_vald.png"><meta property="og:site_name" content="vald"><meta property="og:locale" content="en_US"><meta property="fb:app_id" content="615732422350002"><meta name=twitter:site content="@vdaas_vald"><meta name=twitter:card content="app"><link rel="shortcut icon" href=https://vald.vdaas.org//favicon.ico><link rel=stylesheet type=text/css href=/css/style.min.css><link rel=stylesheet type=text/css href=/css/header.min.css><link rel=stylesheet type=text/css href=/css/footer.min.css><link rel=stylesheet type=text/css href=/css/main.min.css><script type=text/javascript src=/js/script.min.js defer></script><meta name=viewport content="target-densitydpi=device-dpi,width=device-width,maximum-scale=1,user-scalable=yes"></head><body><header class=header id=header><div class=header__content><nav class=header__nav><a href=https://vald.vdaas.org/ class=header-nav__link><picture class=header-nav__image><source srcset=https://vald.vdaas.org//images/vald_white.svg media="(prefers-color-scheme: dark)"><img src=https://vald.vdaas.org//images/vald_color_1.svg alt>
</picture></a><a class=header-nav__icon id=nav-btn><span class=header-nav__button></span></a><ul class=header__list id=menu><li class=header__item><a href=/docs/overview/about-vald class=header__link>About</a></li><li class=header__item><a href=/docs/tutorial/get-started class=header__link>Get Started</a></li><li class=header__item><a href=/docs/user-guides/sdks class=header__link>SDKs</a></li><li class=header__item><a href=/docs class=header__link>Docs</a></li><li class=header__item><a href=https://vdaas-vald.medium.com/ target=_blank class=header__link>Blog<br></a></li><li class=header__item><details class=header__version id=version_details><summary class=version__current id=current_version>v1.7.14</summary><ul class=version__list><il class=version__item><a href=javascript:void(0) class="version__link version__link--latest">v1.7.14</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.7</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.6</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.5</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.4</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.3</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.2</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.1</a></il>
<il class=version__item><a href=javascript:void(0) class=version__link>v1.0</a></il></ul></details></li><li class=header__item><a class=header__git href=https://github.com/vdaas/vald target=_blank><picture class=git__logo><source srcset=https://vald.vdaas.org//images/logo_github_white.svg media="(prefers-color-scheme: dark)" width=18 height=18><img src=https://vald.vdaas.org//images/logo_github_black.svg alt=github width=18 height=18></picture><div class=git__star><p class=git__starnum id=git-star-num></p></div></a></li></ul></nav></div></header><main role=main><div class=single><aside class=page><nav><ul id=list-body><li class=withchild id=cat_Overview>Overview<ul><li class=index><a href=/docs/overview/about-vald/>About Vald</a></li><li class=index><a href=/docs/overview/architecture/>Architecture</a></li><li class=index><a href=/docs/overview/data-flow/>Data Flow</a></li></ul></li><li class=withchild id=cat_Component>Component<ul><li class=index><a href=/docs/overview/component/agent/>Agent</a></li><li class=index><a href=/docs/overview/component/lb-gateway/>Lb Gateway</a></li><li class=index><a href=/docs/overview/component/filter-gateway/>Filter Gateway</a></li><li class=index><a href=/docs/overview/component/discoverer/>Discoverer</a></li><li class=index><a href=/docs/overview/component/index-manager/>Index Manager</a></li><li class=index><a href=/docs/overview/component/mirror-gateway/>Mirror Gateway</a></li></ul></li><li class=withchild id=cat_Tutorial>Tutorial<ul><li class=index><a href=/docs/tutorial/get-started/>Get Started</a></li><li class=index><a href=/docs/tutorial/get-started-with-faiss-agent/>Get Started With Faiss Agent</a></li><li class=index><a href=/docs/tutorial/vald-agent-standalone-on-k8s/>Vald Agent Standalone on K8s</a></li><li class=index><a href=/docs/tutorial/vald-agent-standalone-on-docker/>Vald Agent Standalone on Docker</a></li><li class=index><a href=/docs/tutorial/vald-multicluster-on-k8s/>Vald Multicluster on K8s</a></li></ul></li><li class=withchild id=cat_Usecase>Usecase<ul><li class=index><a href=/docs/usecase/usage-example/>Usage Example</a></li></ul></li><li class=withchild id="cat_User Guides">User Guides<ul><li class=index><a href=/docs/user-guides/configuration/>Configuration</a></li><li class=index><a href=/docs/user-guides/backup-configuration/>Backup Configuration</a></li><li class=index><a href=/docs/user-guides/filtering-configuration/>Filtering Configuration</a></li><li class=index><a href=/docs/user-guides/mirroring-configuration/>Mirroring Configuration</a></li><li class=index><a href=/docs/user-guides/cluster-role-binding/>Cluster Role Binding</a></li><li class=index><a href=/docs/user-guides/deployment/>Deployment</a></li><li class=index><a href=/docs/user-guides/operations/>Operations</a></li><li class=index><a href=/docs/user-guides/upgrade-cluster/>Upgrade Cluster</a></li><li class=index><a href=/docs/user-guides/capacity-planning/>Capacity Planning</a></li><li class=index><a href=/docs/user-guides/client-api-config/>Client Api Config</a></li><li class=view><a href=/docs/user-guides/observability-configuration/>Observability Configuration</a></li><li class=index><a href=/docs/user-guides/network-policy/>Network Policy</a></li><li class=index><a href=/docs/user-guides/index-correction/>Index Correction</a></li><li class=index><a href=/docs/user-guides/sdks/>Sdks</a></li><li class=index><a href=/docs/user-guides/read-replica-and-rotator/>Read Replica and Rotator</a></li></ul></li><li class=withchild id=cat_Performance>Performance<ul><li class=index><a href=/docs/performance/benchmark/>Benchmark</a></li><li class=index><a href=/docs/performance/loadtest/>Loadtest</a></li><li class=index><a href=/docs/performance/continuous-benchmark/>Continuous Benchmark</a></li><li class=index><a href=/docs/performance/tuning-search-performance/>Tuning Search Performance</a></li></ul></li><li class=withchild id=cat_Api>API<ul><li class=index><a href=/docs/api/insert/>Insert</a></li><li class=index><a href=/docs/api/update/>Update</a></li><li class=index><a href=/docs/api/upsert/>Upsert</a></li><li class=index><a href=/docs/api/search/>Search</a></li><li class=index><a href=/docs/api/remove/>Remove</a></li><li class=index><a href=/docs/api/flush/>Flush</a></li><li class=index><a href=/docs/api/object/>Object</a></li><li class=index><a href=/docs/api/filter-gateway/>Filter Gateway</a></li><li class=index><a href=/docs/api/mirror-gateway/>Mirror Gateway</a></li><li class=index><a href=/docs/api/status/>Status</a></li><li class=index><a href=/docs/api/build_proto/>Build</a></li></ul></li><li class=withchild id=cat_Troubleshooting>Troubleshooting<ul><li class=index><a href=/docs/troubleshooting/client-side/>Client Side</a></li><li class=index><a href=/docs/troubleshooting/provisioning/>Provisioning</a></li><li class=index><a href=/docs/troubleshooting/mirror-gateway/>Mirror Gateway</a></li></ul></li><li class=withchild id=cat_Contributing>Contributing<ul><li class=index><a href=/docs/contributing/contributing-guide/>Contributing Guide</a></li><li class=index><a href=/docs/contributing/development/>Development</a></li><li class=index><a href=/docs/contributing/coding-style/>Coding Style</a></li><li class=index><a href=/docs/contributing/unit-test-guideline/>Unit Test Guideline</a></li><li class=index><a href=/docs/contributing/reviewer-guideline/>Reviewer Guideline</a></li></ul></li><li class=withchild id=cat_Support>Support<ul><li class=index><a href=/docs/support/contacts/>Contacts</a></li><li class=index><a href=/docs/support/faq/>FAQ</a></li></ul></li><li class=withchild id=cat_Release>Release<ul><li class=index><a href=/docs/release/changelog/>Changelog</a></li></ul></li></ul></nav></aside><div class=content><div class=markdown id=markdown><h1 id=observability-configuration>Observability Configuration</h1><p>Observability for the Vald cluster helps to check each Vald component status by monitoring metrics, logs, and traces.
By enabling observability, you can monitor and visualize the number of indexes, the timing of creating indexes, the number of RPC, CPU resource usage, Memory resource usage, events, etc.</p><p>This page shows the best practice for applying observing features by constructing an observability environment and setting the Vald Helm chart.</p><h2 id=architecture>Architecture</h2><p>Vald conforms <a href=https://opentelemetry.io/docs/reference/specification/protocol/otlp/>OpenTelemetry Protocol</a> and does NOT depend on any commercial data format.</p><img src=/images/guides/observability-configuration/architecture.png><p>OpenTelemetry Collector handles receiving / processing / exporting the telemetry data, which does NOT depend on the vendors&rsquo; format.
All Vald components can send OTLP-compliant telemetry data, like metrics, traces, or logs, to the OpenTelemetry Collector.
The telemetry data is used to monitor or visualize with the observing tools.</p><h2 id=build-an-observing-environment>Build an observing environment</h2><p>The recommended observability environment consists of the following:</p><ul><li>Cert-Manager</li><li>Jaeger Operator and Jaeger</li><li>Prometheus Operator and Prometheus</li><li>Grafana</li><li>OpenTelemetry Operator and OpenTelemetry Collector</li></ul><p>Vald provides <a href=https://github.com/vdaas/vald/tree/main/k8s/metrics>the default manifests</a> and <a href=https://github.com/vdaas/vald/blob/main/Makefile.d/k8s.mk>the make commands</a> for deploying those components.
Please refer to the following sections to deploy each component.</p><div class=notice>You can change parameters such as the export host by editing the manifest for your demands.</div><h3 id=cert-manager>Cert-Manager</h3><p>A <code>Cert-Manager</code> is required to enable to use of operators on the Kubernetes Cluster.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>make k8s/external/cert-manager/deploy
</span></span></code></pre></div><h3 id=jaeger-operator-and-jaeger>Jaeger Operator and Jaeger</h3><p>Jaeger is helpful for monitoring trace data. It can be available by running the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>make k8s/metrics/jaeger/deploy
</span></span></code></pre></div><h3 id=prometheus-operator-and-prometheus>Prometheus Operator and Prometheus</h3><p>Vald recommends using Prometheus as a backend service by the following command to monitor the metrics data.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>make k8s/metrics/prometheus/operator/deploy
</span></span></code></pre></div><h3 id=grafana>Grafana</h3><p>Vald recommends using Grafana to visualize metrics data.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>make k8s/metrics/grafana/deploy
</span></span></code></pre></div><h3 id=opentelemetry-operator-and-opentelemetry-collector>OpenTelemetry Operator and OpenTelemetry Collector</h3><p>Vald uses OpenTelemetry Collector to get the telemetry data and export it to monitor backend components.
The following command deploys OpenTelemetry Collector via OpenTelemetry Collector.</p><div class=warn>Before executing the following command, please ensure the Prometheus operator runs healthy.</div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>make k8s/otel/operator/deploy k8s/otel/collector/deploy
</span></span></code></pre></div><h3 id=deploy-observability-components-with-a-simple-command>Deploy Observability components with a simple command</h3><p>If you would like to deploy observability components with a simple command, please use the following command.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>make k8s/external/cert-manager/deploy k8s/monitoring/deploy
</span></span></code></pre></div><h2 id=configure-helm-chart>Configure Helm chart</h2><p>This section shows how to set <code>values.yaml</code> to enable each Vald component to send its own telemetry data.</p><p>The setting points are the following:</p><ol><li>Enable observability feature</li><li>Enable sending system metrics</li><li>Enable sending trace data</li><li>Set OpenTelemetry parameters</li></ol><div class=notice>The general settings are described for convenience, but individual settings are possible for each component by editing `[component].observability`.</div><h3 id=enable-observability-feature>Enable observability feature</h3><p>To enable the observability feature, you must set <code>defaults.observability.enabled</code> as <code>true</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>defaults</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>observability</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># enable observability</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
</span></span></code></pre></div><h3 id=enable-sending-system-metrics>Enable sending system metrics</h3><p>Each Vald component sends the system metrics by editing <code>defaults.observability.metrics</code>.
All metrics are enabled by default.
Vald recommends using default values unless there is a specific reason.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>defaults</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>observability</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># enable version info metrics</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>metrics</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>enable_version_info</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># If the enable_version_info setting is true, this information will be added to the keys of the version info metrics.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>version_info_labels</span>:
</span></span><span style=display:flex><span>        - <span style=color:#e6db74>&#34;vald_version&#34;</span>
</span></span><span style=display:flex><span>        - <span style=color:#e6db74>&#34;server_name&#34;</span>
</span></span><span style=display:flex><span>        - <span style=color:#e6db74>&#34;git_commit&#34;</span>
</span></span><span style=display:flex><span>        - <span style=color:#e6db74>&#34;build_time&#34;</span>
</span></span><span style=display:flex><span>        - <span style=color:#e6db74>&#34;go_version&#34;</span>
</span></span><span style=display:flex><span>        - <span style=color:#e6db74>&#34;go_os&#34;</span>
</span></span><span style=display:flex><span>        - <span style=color:#e6db74>&#34;go_arch&#34;</span>
</span></span><span style=display:flex><span>        - <span style=color:#e6db74>&#34;algorithm_info&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># enable memory metrics</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>enable_memory</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># enable goroutine metrics</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>enable_goroutine</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># enable cgo metrics</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>enable_cgo</span>: <span style=color:#66d9ef>true</span>
</span></span></code></pre></div><h3 id=enable-sending-trace-data>Enable sending trace data</h3><p>Please set <code>defaults.observability.trace.enabled</code> as <code>true</code> to enable sending trace data.
The default value is <code>false</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>defaults</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>observability</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>trace</span>:
</span></span><span style=display:flex><span>      <span style=color:#75715e># enable to send trace data</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>enabled</span>: <span style=color:#66d9ef>true</span>
</span></span></code></pre></div><h3 id=opentelemetry-settings>OpenTelemetry settings</h3><p>This section shows the detailed settings for sending telemetry data.</p><h4 id=specify-opentelemetry-collector-endpoint>Specify OpenTelemetry Collector endpoint</h4><p>To send the telemetry data, you must set the OpenTelemetry Collector&rsquo;s endpoint to <code>defaults.observability.otlp.collector_endpoint</code>.
The default value is not set.</p><div class=warn>It is required to send telemetry data.</div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>defaults</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>observability</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>otlp</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>collector_endpoint</span>: <span style=color:#e6db74>&#34;opentelemetry-collector-collector.default.svc.cluster.local:4317&#34;</span>
</span></span></code></pre></div><h4 id=specify-the-telemetry-attribute>Specify the Telemetry attribute</h4><p>You can add the component information to the attribute of telemetry data by editing <code>defaults.observability.otlp.attribute</code>.
E.g., when setting <code>vald-agent-ngt-0</code> as <code>agent.observability.otlp.attribute.pod_name</code>, <code>target_pod: vald-agent-ngt-0</code> will be added to the attribute.
These attributes are set auto by the environment values, so Vald recommends using default values unless there is a specific reason.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>defaults</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>observability</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>otlp</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>attribute</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># deployed namespace</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>namespace</span>: <span style=color:#ae81ff>vald</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># pod name</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>pod_name</span>: <span style=color:#ae81ff>vald-agent-ngt-0</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># deployed node name</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>node_name</span>: <span style=color:#ae81ff>kube-worker01</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># service name</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>service_name</span>: <span style=color:#ae81ff>vald-agent-ngt</span>
</span></span></code></pre></div><h4 id=customize-send-configuration>Customize send configuration</h4><p>You can modify the sending telemetry data behavior by changing the <code>default.observability.otlp</code> parameters.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>defaults</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>observability</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>otlp</span>:
</span></span><span style=display:flex><span>      <span style=color:#75715e># Maximum duration for constructing a batch from the queue. The Processor forcefully sends available spans when timeout is reached.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>trace_batch_timeout</span>: <span style=color:#e6db74>&#34;1s&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Maximum duration for exporting trace spans</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>trace_export_timeout</span>: <span style=color:#e6db74>&#34;1m&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Maximum batch size of trace spans.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>trace_max_export_batch_size</span>: <span style=color:#ae81ff>1024</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Maximum queue size to buffer trace spans for delayed processing.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>trace_max_queue_size</span>: <span style=color:#ae81ff>256</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Export interval for metrics</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>metrics_export_interval</span>: <span style=color:#e6db74>&#34;1s&#34;</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># Maximum duration for exporting metrics</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>metrics_export_timeout</span>: <span style=color:#e6db74>&#34;1m&#34;</span>
</span></span></code></pre></div><h4 id=grpc-configuration>gRPC Configuration</h4><p>The interceptor configuration is required to send the metrics and trace data related to gRPC.
You can add the interceptor to the server-side and client-side by editing <code>defaults.server_config.servers.grpc.server.grpc.interceptors</code> parameters.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>defaults</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>server_config</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>servers</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>grpc</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>server</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>grpc</span>:
</span></span><span style=display:flex><span>            <span style=color:#75715e># gRPC Server interceptor.</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>interceptors</span>:
</span></span><span style=display:flex><span>              - <span style=color:#ae81ff>TraceInterceptor</span>
</span></span><span style=display:flex><span>              - <span style=color:#ae81ff>MetricInterceptor</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>grpc</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># gRPC Client interceptor.</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>client</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>dial_option</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>interceptors</span>:
</span></span><span style=display:flex><span>          - <span style=color:#ae81ff>TraceInterceptor</span>
</span></span></code></pre></div><h2 id=monitoring-telemetry-data>Monitoring telemetry data</h2><p>Telemetry data can be monitored using Grafana, Jaeger, etc.
Vald publishes <a href=https://github.com/vdaas/vald/blob/main/charts/vald/values/dev-observability.yaml>the sample manifest</a>, which enables Grafana and Jaeger.</p><p>You can apply it after creating an observability environment.</p><div class=notice>The default manifests don't set ingress host.<br>You can monitor the browser by port forwarding or define the ingress host by yourself.</div><h2 id=cleanup>Cleanup</h2><p>Lastly, the Vald cluster will be removed by executing the following command.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>helm uninstall vald
</span></span></code></pre></div><p>Also, the observability components will be removed by executing the following command.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>make k8s/monitoring/delete k8s/external/cert-manager/delete
</span></span></code></pre></div><p>And the observability components can also be removed by executing the following command.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>make k8s/otel/collector/delete <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  k8s/otel/operator/delete <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  k8s/metrics/grafana/delete <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  k8s/metrics/jaeger/delete <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  k8s/metrics/prometheus/operator/delete <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  k8s/external/cert-manager/delete
</span></span></code></pre></div><h2>See also</h2><div class=cardlist><a href=/docs/user-guides/configuration/ class=cardlist__card><p class=card__title>Configuration</p><p class=card__text>Applies basic configuration for running Vald cluster</p></a><a href=/docs/user-guides/backup-configuration/ class=cardlist__card><p class=card__title>Backup Configuration</p><p class=card__text>Applies backup feature for saving and restoring indexes</p></a><a href=/docs/user-guides/filtering-configuration/ class=cardlist__card><p class=card__title>Filtering Configuration</p><p class=card__text>Applies filtering feature to the Vald cluster</p></a><a href=/docs/user-guides/mirroring-configuration/ class=cardlist__card><p class=card__title>Mirroring Configuration</p><p class=card__text>Applies mirror gateway for running multi Vald clusters</p></a></div></div><aside class=current id=current><button class=menu><span class=dot></span></button><nav id=TableOfContents><ul><li><a href=#architecture>Architecture</a></li><li><a href=#build-an-observing-environment>Build an observing environment</a><ul><li><a href=#cert-manager>Cert-Manager</a></li><li><a href=#jaeger-operator-and-jaeger>Jaeger Operator and Jaeger</a></li><li><a href=#prometheus-operator-and-prometheus>Prometheus Operator and Prometheus</a></li><li><a href=#grafana>Grafana</a></li><li><a href=#opentelemetry-operator-and-opentelemetry-collector>OpenTelemetry Operator and OpenTelemetry Collector</a></li><li><a href=#deploy-observability-components-with-a-simple-command>Deploy Observability components with a simple command</a></li></ul></li><li><a href=#configure-helm-chart>Configure Helm chart</a><ul><li><a href=#enable-observability-feature>Enable observability feature</a></li><li><a href=#enable-sending-system-metrics>Enable sending system metrics</a></li><li><a href=#enable-sending-trace-data>Enable sending trace data</a></li><li><a href=#opentelemetry-settings>OpenTelemetry settings</a></li></ul></li><li><a href=#monitoring-telemetry-data>Monitoring telemetry data</a></li><li><a href=#cleanup>Cleanup</a></li></ul></nav></aside></div></div></main><footer class=footer><div class=footer__content><ul class=footer__index><li class=footer__item><a href=/docs/overview/about-vald class=footer__link>About<br></a></li><li class=footer__item><a href=/docs/tutorial/get-started class=footer__link>Get Started<br></a></li><li class=footer__item><a href=/docs/user-guides/sdks class=footer__link>SDKs</a></li><li class=footer__item><a href=/docs class=footer__link>Docs</a></li><li class=footer__item><a href=https://vdaas-vald.medium.com/ target=_blank class=footer__link>Blog<br></a></li></ul><ul class=footer__sns><li class=footer__item><a class="footer__item footer__icon" href=https://x.com/vdaas_vald target=_blank><picture><source srcset=https://vald.vdaas.org//images/logo_x_white.svg media="(prefers-color-scheme: dark)" class=icon__image width=24 height=24><img src=https://vald.vdaas.org//images/logo_x_black.svg alt=x class=icon__image></picture></a></li><li class=footer__item><a class="footer__item footer__icon" href=https://join.slack.com/t/vald-community/shared_invite/zt-db2ky9o4-R_9p2sVp8xRwztVa8gfnPA target=_blank><picture><source srcset=https://vald.vdaas.org//images/logo_slack_white.svg media="(prefers-color-scheme: dark)" class=icon__image width=24 height=24><img src=https://vald.vdaas.org//images/logo_slack_black.svg alt=slack class=icon__image></picture></a></li><li class=footer__item><a class="footer__item footer__icon" href=https://github.com/vdaas/vald target=_blank><picture><source srcset=https://vald.vdaas.org//images/logo_github_white.svg media="(prefers-color-scheme: dark)" class=icon__image width=24 height=24><img src=https://vald.vdaas.org//images/logo_github_black.svg alt=github class=icon__image></picture></a></li></ul></div><p class=footer__copylight>©2019-2024 vald.vdaas.org Vald team</p></footer></body></html>