#
# Copyright (C) 2019-2025 vdaas.org vald team <vald@vdaas.org>
#
# Licensed under the Apache License, Version 2.0 (the "License");
# You may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#    https://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

# DO_NOT_EDIT this workflow file is generated by https://github.com/vdaas/vald/blob/main/hack/docker/gen/main.go
apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboards-vald-agent-memory
data:
  99-vald-agent-memory.json: |-
    {
      "uid": "99-vald-agent-memory",
      "title": "Vald Agent Memory",
      "timezone": "browser",
      "editable": true,
      "graphTooltip": 0,
      "time": {
        "from": "now-15m",
        "to": "now"
      },
      "fiscalYearStartMonth": 0,
      "refresh": "5s",
      "schemaVersion": 41,
      "panels": [
        {
          "type": "row",
          "collapsed": false,
          "title": "runtime.Memstats",
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 0
          },
          "id": 0,
          "panels": []
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "alloc_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "Currently allocated number of bytes on the heap",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 1
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "alloc_bytes_total{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "Cumulative bytes allocated for heap objects",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 1
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "sys_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "Total bytes of memory obtained from the OS",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 1
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "lookups_count{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "The number of pointers",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 1
          },
          "fieldConfig": {
            "defaults": {
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "mallocs_total{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "The cumulative count of heap objects allocated",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 9
          },
          "fieldConfig": {
            "defaults": {
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "frees_total{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "The cumulative count of heap objects freed",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 9
          },
          "fieldConfig": {
            "defaults": {
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "heap_alloc_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "Bytes of allocated heap object",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 9
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "heap_sys_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "Bytes of heap memory obtained from the OS",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 9
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "heap_idle_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "Bytes in idle (unused) spans",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 17
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "heap_inuse_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "Bytes in in-use spans",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 17
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "heap_released_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "Bytes of physical memory returned to the OS",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 17
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "heap_objects_count{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "The number of allocated heap objects",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 17
          },
          "fieldConfig": {
            "defaults": {
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "stack_inuse_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "Bytes in stack spans",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 25
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "stack_sys_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "Bytes of stack memory obtained from the OS",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 25
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "mspan_inuse_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "Bytes of allocated mspan structures",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 25
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "mspan_sys_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "Bytes of memory obtained from the OS for mspan structures",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 25
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "mcache_inuse_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "Bytes of allocated mcache structures",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 33
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "mcache_sys_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "Bytes of memory obtained from the OS mcache structures",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 33
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "buckhash_sys_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "Bytes of memory in profiling bucket hash tables",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 33
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "gc_sys_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "Bytes of memory in GC metadata",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 33
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "other_sys_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "Bytes of memory in misc off-heap runtime allocations",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 41
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "next_gc_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "Target heap size of the next GC",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 41
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "pause_ms_total{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "The cumulative milliseconds in GC",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 41
          },
          "fieldConfig": {
            "defaults": {
              "unit": "ms",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "gc_count{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "The number of completed GC cycles",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 41
          },
          "fieldConfig": {
            "defaults": {
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "gc_count{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "The number of GC cycles called by the application",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 49
          },
          "fieldConfig": {
            "defaults": {
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "heap_will_return_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "Bytes of returning to OS. It contains the two following parts (heapWillReturn = heapIdle - heapReleased)",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 49
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "live_objects_count{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "The cumulative count of living heap objects allocated. It contains the two following parts (liveObjects = mallocs - frees)",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 49
          },
          "fieldConfig": {
            "defaults": {
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "row",
          "collapsed": false,
          "title": "/proc/\u003cpid\u003e/status",
          "gridPos": {
            "h": 1,
            "w": 24,
            "x": 0,
            "y": 57
          },
          "id": 0,
          "panels": []
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "vmpeak_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "peak virtual memory size",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 58
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "vmsize_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "total program size",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 58
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "vmdata_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "size of private data segments",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 58
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "vmrss_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "size of memory portions. It contains the three following parts (VmRSS = RssAnon + RssFile + RssShmem)",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 58
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "vmhwm_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "peak resident set size (\"high water mark\")",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 66
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "vmstk_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "size of stack segments",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 66
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "vmswap_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "amount of swap used by anonymous private data (shmem swap usage is not included)",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 66
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "vmexe_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "size of text segment",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 66
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "vmlib_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "size of shared library code",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 0,
            "y": 74
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "vmlck_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "locked memory size",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 6,
            "y": 74
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "vmpin_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "pinned memory size",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 12,
            "y": 74
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        },
        {
          "type": "timeseries",
          "targets": [
            {
              "expr": "vmpte_bytes{exported_kubernetes_namespace=\"$Namespace\",kubernetes_name=~\"$ReplicaSet\",target_pod=~\"$PodName\"}",
              "format": "time_series",
              "legendFormat": "{{target_pod}}",
              "refId": ""
            }
          ],
          "title": "size of page table entries",
          "transparent": false,
          "gridPos": {
            "h": 8,
            "w": 6,
            "x": 18,
            "y": 74
          },
          "fieldConfig": {
            "defaults": {
              "unit": "decbytes",
              "min": 0
            },
            "overrides": []
          }
        }
      ],
      "templating": {
        "list": [
          {
            "type": "query",
            "name": "Namespace",
            "label": "namespace",
            "skipUrlSync": false,
            "query": "label_values(kube_pod_info, namespace)",
            "current": {
              "selected": false,
              "text": "default",
              "value": "default"
            },
            "multi": false,
            "allowCustomValue": true,
            "includeAll": false,
            "auto": false,
            "auto_min": "10s",
            "auto_count": 30
          },
          {
            "type": "query",
            "name": "ReplicaSet",
            "label": "name",
            "skipUrlSync": false,
            "query": "label_values(app_version_info{server_name=~\"agent .*\"}, kubernetes_name)",
            "multi": false,
            "allowCustomValue": true,
            "includeAll": false,
            "auto": false,
            "auto_min": "10s",
            "auto_count": 30
          },
          {
            "type": "query",
            "name": "PodName",
            "label": "pod",
            "skipUrlSync": false,
            "query": "label_values(app_version_info{server_name=~\"agent .*\", kubernetes_name=\"$ReplicaSet\"}, target_pod)",
            "current": {
              "selected": false,
              "text": "All",
              "value": "$__all"
            },
            "multi": false,
            "allowCustomValue": true,
            "includeAll": true,
            "allValue": ".+",
            "auto": false,
            "auto_min": "10s",
            "auto_count": 30
          },
          {
            "type": "query",
            "name": "ContainerName",
            "label": "container",
            "skipUrlSync": false,
            "query": "label_values(app_version_info{server_name=~\"agent .*\", kubernetes_name=\"$ReplicaSet\", target_pod=~\"$PodName\"}, container)",
            "multi": true,
            "allowCustomValue": true,
            "includeAll": true,
            "allValue": ".+",
            "auto": false,
            "auto_min": "10s",
            "auto_count": 30
          },
          {
            "type": "interval",
            "name": "interval",
            "label": "interval",
            "skipUrlSync": false,
            "query": "1m,2m,5m,10m,30m,1h,6h,12h,1d",
            "current": {
              "text": "5m",
              "value": "5m"
            },
            "multi": false,
            "allowCustomValue": true,
            "includeAll": false,
            "auto": false,
            "auto_min": "10s",
            "auto_count": 30
          }
        ]
      },
      "annotations": {}
    }
