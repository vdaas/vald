# vald-benchmark-operator

![Version: v1.7.5](https://img.shields.io/badge/Version-v1.7.5-informational?style=flat-square) ![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square) ![AppVersion: 1.16.0](https://img.shields.io/badge/AppVersion-1.16.0-informational?style=flat-square)

A benchmark operator for benchmarking the Vald cluster.

**Homepage:** <https://vald.vdaas.org>

## Maintainers

| Name     | Email                | Url |
| -------- | -------------------- | --- |
| kpango   | <kpango@vdaas.org>   |     |
| vankichi | <vankichi@vdaas.org> |     |
| kmrmt    | <ksk@vdaas.org>      |     |

## Source Code

- <https://github.com/vdaas/vald>

## Values

| Key                                                                     | Type   | Default                                                                                                                                                                        | Description                                                                                                 |
| ----------------------------------------------------------------------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------- |
| affinity                                                                | object | `{}`                                                                                                                                                                           | affinity                                                                                                    |
| annotations                                                             | object | `{}`                                                                                                                                                                           | deployment annotations                                                                                      |
| image.pullPolicy                                                        | string | `"Always"`                                                                                                                                                                     | image pull policy                                                                                           |
| image.repository                                                        | string | `"vdaas/vald-benchmark-operator"`                                                                                                                                              | job image repository                                                                                        |
| image.tag                                                               | string | `"v1.7.5"`                                                                                                                                                                     | image tag for job docker image                                                                              |
| job_image.pullPolicy                                                    | string | `"Always"`                                                                                                                                                                     |                                                                                                             |
| job_image.repository                                                    | string | `"vdaas/vald-benchmark-job"`                                                                                                                                                   |                                                                                                             |
| job_image.tag                                                           | string | `"v1.7.5"`                                                                                                                                                                     |                                                                                                             |
| logging.format                                                          | string | `"raw"`                                                                                                                                                                        | logging format. logging format must be `raw` or `json`                                                      |
| logging.level                                                           | string | `"debug"`                                                                                                                                                                      | logging level. logging level must be `debug`, `info`, `warn`, `error` or `fatal`.                           |
| logging.logger                                                          | string | `"glg"`                                                                                                                                                                        | logger name. currently logger must be `glg` or `zap`.                                                       |
| name                                                                    | string | `"vald-benchmark-operator"`                                                                                                                                                    | name of the deployment                                                                                      |
| nodeSelector                                                            | object | `{}`                                                                                                                                                                           | node labels for pod assignment                                                                              |
| observability.enabled                                                   | bool   | `false`                                                                                                                                                                        |                                                                                                             |
| observability.metrics.enable_cgo                                        | bool   | `true`                                                                                                                                                                         |                                                                                                             |
| observability.metrics.enable_goroutine                                  | bool   | `true`                                                                                                                                                                         |                                                                                                             |
| observability.metrics.enable_memory                                     | bool   | `true`                                                                                                                                                                         |                                                                                                             |
| observability.metrics.enable_version_info                               | bool   | `true`                                                                                                                                                                         |                                                                                                             |
| observability.metrics.version_info_labels[0]                            | string | `"vald_version"`                                                                                                                                                               |                                                                                                             |
| observability.metrics.version_info_labels[1]                            | string | `"server_name"`                                                                                                                                                                |                                                                                                             |
| observability.metrics.version_info_labels[2]                            | string | `"git_commit"`                                                                                                                                                                 |                                                                                                             |
| observability.metrics.version_info_labels[3]                            | string | `"build_time"`                                                                                                                                                                 |                                                                                                             |
| observability.metrics.version_info_labels[4]                            | string | `"go_version"`                                                                                                                                                                 |                                                                                                             |
| observability.metrics.version_info_labels[5]                            | string | `"go_os"`                                                                                                                                                                      |                                                                                                             |
| observability.metrics.version_info_labels[6]                            | string | `"go_arch"`                                                                                                                                                                    |                                                                                                             |
| observability.metrics.version_info_labels[7]                            | string | `"algorithm_info"`                                                                                                                                                             |                                                                                                             |
| observability.otlp.attribute.namespace                                  | string | `"_MY_POD_NAMESPACE_"`                                                                                                                                                         |                                                                                                             |
| observability.otlp.attribute.node_name                                  | string | `"_MY_NODE_NAME_"`                                                                                                                                                             |                                                                                                             |
| observability.otlp.attribute.pod_name                                   | string | `"_MY_POD_NAME_"`                                                                                                                                                              |                                                                                                             |
| observability.otlp.attribute.service_name                               | string | `"vald-benchmark-operator"`                                                                                                                                                    |                                                                                                             |
| observability.otlp.collector_endpoint                                   | string | `""`                                                                                                                                                                           |                                                                                                             |
| observability.otlp.metrics_export_interval                              | string | `"1s"`                                                                                                                                                                         |                                                                                                             |
| observability.otlp.metrics_export_timeout                               | string | `"1m"`                                                                                                                                                                         |                                                                                                             |
| observability.otlp.trace_batch_timeout                                  | string | `"1s"`                                                                                                                                                                         |                                                                                                             |
| observability.otlp.trace_export_timeout                                 | string | `"1m"`                                                                                                                                                                         |                                                                                                             |
| observability.otlp.trace_max_export_batch_size                          | int    | `1024`                                                                                                                                                                         |                                                                                                             |
| observability.otlp.trace_max_queue_size                                 | int    | `256`                                                                                                                                                                          |                                                                                                             |
| observability.trace.enabled                                             | bool   | `false`                                                                                                                                                                        |                                                                                                             |
| observability.trace.sampling_rate                                       | int    | `1`                                                                                                                                                                            |                                                                                                             |
| podAnnotations                                                          | object | `{}`                                                                                                                                                                           | pod annotations                                                                                             |
| podSecurityContext                                                      | object | `{"fsGroup":65532,"fsGroupChangePolicy":"OnRootMismatch","runAsGroup":65532,"runAsNonRoot":true,"runAsUser":65532}`                                                            | security context for pod                                                                                    |
| rbac.create                                                             | bool   | `true`                                                                                                                                                                         | required roles and rolebindings will be created                                                             |
| rbac.name                                                               | string | `"vald-benchmark-operator"`                                                                                                                                                    | name of roles and rolebindings                                                                              |
| replicas                                                                | int    | `1`                                                                                                                                                                            | the number of replica for deployment                                                                        |
| resources                                                               | object | `{"limits":{"cpu":"300m","memory":"300Mi"},"requests":{"cpu":"200m","memory":"200Mi"}}`                                                                                        | kubernetes resources of pod                                                                                 |
| securityContext                                                         | object | `{"allowPrivilegeEscalation":false,"capabilities":{"drop":["ALL"]},"privileged":false,"readOnlyRootFilesystem":true,"runAsGroup":65532,"runAsNonRoot":true,"runAsUser":65532}` | security context for container                                                                              |
| server_config.full_shutdown_duration                                    | string | `"600s"`                                                                                                                                                                       |                                                                                                             |
| server_config.healths.liveness.enabled                                  | bool   | `true`                                                                                                                                                                         |                                                                                                             |
| server_config.healths.liveness.host                                     | string | `"0.0.0.0"`                                                                                                                                                                    |                                                                                                             |
| server_config.healths.liveness.livenessProbe.failureThreshold           | int    | `2`                                                                                                                                                                            | liveness probe failure threshold                                                                            |
| server_config.healths.liveness.livenessProbe.httpGet.path               | string | `"/liveness"`                                                                                                                                                                  | readiness probe path                                                                                        |
| server_config.healths.liveness.livenessProbe.httpGet.port               | string | `"liveness"`                                                                                                                                                                   | readiness probe port                                                                                        |
| server_config.healths.liveness.livenessProbe.httpGet.scheme             | string | `"HTTP"`                                                                                                                                                                       | readiness probe scheme                                                                                      |
| server_config.healths.liveness.livenessProbe.initialDelaySeconds        | int    | `15`                                                                                                                                                                           | liveness probe initial delay seconds                                                                        |
| server_config.healths.liveness.livenessProbe.periodSeconds              | int    | `20`                                                                                                                                                                           | liveness probe period seconds                                                                               |
| server_config.healths.liveness.livenessProbe.successThreshold           | int    | `1`                                                                                                                                                                            | liveness probe success threshold                                                                            |
| server_config.healths.liveness.livenessProbe.timeoutSeconds             | int    | `5`                                                                                                                                                                            | liveness probe timeout seconds                                                                              |
| server_config.healths.liveness.port                                     | int    | `3000`                                                                                                                                                                         |                                                                                                             |
| server_config.healths.liveness.server.http.handler_timeout              | string | `""`                                                                                                                                                                           |                                                                                                             |
| server_config.healths.liveness.server.http.idle_timeout                 | string | `""`                                                                                                                                                                           |                                                                                                             |
| server_config.healths.liveness.server.http.read_header_timeout          | string | `""`                                                                                                                                                                           |                                                                                                             |
| server_config.healths.liveness.server.http.read_timeout                 | string | `""`                                                                                                                                                                           |                                                                                                             |
| server_config.healths.liveness.server.http.shutdown_duration            | string | `"5s"`                                                                                                                                                                         |                                                                                                             |
| server_config.healths.liveness.server.http.write_timeout                | string | `""`                                                                                                                                                                           |                                                                                                             |
| server_config.healths.liveness.server.mode                              | string | `""`                                                                                                                                                                           |                                                                                                             |
| server_config.healths.liveness.server.network                           | string | `"tcp"`                                                                                                                                                                        |                                                                                                             |
| server_config.healths.liveness.server.probe_wait_time                   | string | `"3s"`                                                                                                                                                                         |                                                                                                             |
| server_config.healths.liveness.server.socket_path                       | string | `""`                                                                                                                                                                           |                                                                                                             |
| server_config.healths.liveness.servicePort                              | int    | `3000`                                                                                                                                                                         |                                                                                                             |
| server_config.healths.readiness.enabled                                 | bool   | `true`                                                                                                                                                                         |                                                                                                             |
| server_config.healths.readiness.host                                    | string | `"0.0.0.0"`                                                                                                                                                                    |                                                                                                             |
| server_config.healths.readiness.port                                    | int    | `3001`                                                                                                                                                                         |                                                                                                             |
| server_config.healths.readiness.readinessProbe.failureThreshold         | int    | `2`                                                                                                                                                                            | readiness probe failure threshold                                                                           |
| server_config.healths.readiness.readinessProbe.httpGet.path             | string | `"/readiness"`                                                                                                                                                                 | readiness probe path                                                                                        |
| server_config.healths.readiness.readinessProbe.httpGet.port             | string | `"readiness"`                                                                                                                                                                  | readiness probe port                                                                                        |
| server_config.healths.readiness.readinessProbe.httpGet.scheme           | string | `"HTTP"`                                                                                                                                                                       | readiness probe scheme                                                                                      |
| server_config.healths.readiness.readinessProbe.initialDelaySeconds      | int    | `10`                                                                                                                                                                           | readiness probe initial delay seconds                                                                       |
| server_config.healths.readiness.readinessProbe.periodSeconds            | int    | `3`                                                                                                                                                                            | readiness probe period seconds                                                                              |
| server_config.healths.readiness.readinessProbe.successThreshold         | int    | `1`                                                                                                                                                                            | readiness probe success threshold                                                                           |
| server_config.healths.readiness.readinessProbe.timeoutSeconds           | int    | `2`                                                                                                                                                                            | readiness probe timeout seconds                                                                             |
| server_config.healths.readiness.server.http.handler_timeout             | string | `""`                                                                                                                                                                           |                                                                                                             |
| server_config.healths.readiness.server.http.idle_timeout                | string | `""`                                                                                                                                                                           |                                                                                                             |
| server_config.healths.readiness.server.http.read_header_timeout         | string | `""`                                                                                                                                                                           |                                                                                                             |
| server_config.healths.readiness.server.http.read_timeout                | string | `""`                                                                                                                                                                           |                                                                                                             |
| server_config.healths.readiness.server.http.shutdown_duration           | string | `"0s"`                                                                                                                                                                         |                                                                                                             |
| server_config.healths.readiness.server.http.write_timeout               | string | `""`                                                                                                                                                                           |                                                                                                             |
| server_config.healths.readiness.server.mode                             | string | `""`                                                                                                                                                                           |                                                                                                             |
| server_config.healths.readiness.server.network                          | string | `"tcp"`                                                                                                                                                                        |                                                                                                             |
| server_config.healths.readiness.server.probe_wait_time                  | string | `"3s"`                                                                                                                                                                         |                                                                                                             |
| server_config.healths.readiness.server.socket_path                      | string | `""`                                                                                                                                                                           |                                                                                                             |
| server_config.healths.readiness.servicePort                             | int    | `3001`                                                                                                                                                                         |                                                                                                             |
| server_config.healths.startup.enabled                                   | bool   | `true`                                                                                                                                                                         | enable startup probe.                                                                                       |
| server_config.healths.startup.startupProbe.failureThreshold             | int    | `30`                                                                                                                                                                           |                                                                                                             |
| server_config.healths.startup.startupProbe.httpGet.path                 | string | `"/liveness"`                                                                                                                                                                  |                                                                                                             |
| server_config.healths.startup.startupProbe.httpGet.port                 | string | `"liveness"`                                                                                                                                                                   |                                                                                                             |
| server_config.healths.startup.startupProbe.httpGet.scheme               | string | `"HTTP"`                                                                                                                                                                       |                                                                                                             |
| server_config.healths.startup.startupProbe.initialDelaySeconds          | int    | `5`                                                                                                                                                                            |                                                                                                             |
| server_config.healths.startup.startupProbe.periodSeconds                | int    | `5`                                                                                                                                                                            |                                                                                                             |
| server_config.healths.startup.startupProbe.successThreshold             | int    | `1`                                                                                                                                                                            |                                                                                                             |
| server_config.healths.startup.startupProbe.timeoutSeconds               | int    | `2`                                                                                                                                                                            |                                                                                                             |
| server_config.metrics.pprof.enabled                                     | bool   | `false`                                                                                                                                                                        |                                                                                                             |
| server_config.metrics.pprof.host                                        | string | `"0.0.0.0"`                                                                                                                                                                    |                                                                                                             |
| server_config.metrics.pprof.port                                        | int    | `6060`                                                                                                                                                                         |                                                                                                             |
| server_config.metrics.pprof.server.http.handler_timeout                 | string | `"5s"`                                                                                                                                                                         |                                                                                                             |
| server_config.metrics.pprof.server.http.idle_timeout                    | string | `"2s"`                                                                                                                                                                         |                                                                                                             |
| server_config.metrics.pprof.server.http.read_header_timeout             | string | `"1s"`                                                                                                                                                                         |                                                                                                             |
| server_config.metrics.pprof.server.http.read_timeout                    | string | `"1s"`                                                                                                                                                                         |                                                                                                             |
| server_config.metrics.pprof.server.http.shutdown_duration               | string | `"5s"`                                                                                                                                                                         |                                                                                                             |
| server_config.metrics.pprof.server.http.write_timeout                   | string | `"1m"`                                                                                                                                                                         |                                                                                                             |
| server_config.metrics.pprof.server.mode                                 | string | `"REST"`                                                                                                                                                                       |                                                                                                             |
| server_config.metrics.pprof.server.network                              | string | `"tcp"`                                                                                                                                                                        |                                                                                                             |
| server_config.metrics.pprof.server.probe_wait_time                      | string | `"3s"`                                                                                                                                                                         |                                                                                                             |
| server_config.metrics.pprof.server.socket_path                          | string | `""`                                                                                                                                                                           |                                                                                                             |
| server_config.servers.grpc.enabled                                      | bool   | `true`                                                                                                                                                                         |                                                                                                             |
| server_config.servers.grpc.host                                         | string | `"0.0.0.0"`                                                                                                                                                                    |                                                                                                             |
| server_config.servers.grpc.name                                         | string | `"grpc"`                                                                                                                                                                       |                                                                                                             |
| server_config.servers.grpc.port                                         | int    | `8081`                                                                                                                                                                         |                                                                                                             |
| server_config.servers.grpc.server.grpc.bidirectional_stream_concurrency | int    | `20`                                                                                                                                                                           |                                                                                                             |
| server_config.servers.grpc.server.grpc.connection_timeout               | string | `""`                                                                                                                                                                           |                                                                                                             |
| server_config.servers.grpc.server.grpc.enable_reflection                | bool   | `true`                                                                                                                                                                         |                                                                                                             |
| server_config.servers.grpc.server.grpc.header_table_size                | int    | `0`                                                                                                                                                                            |                                                                                                             |
| server_config.servers.grpc.server.grpc.initial_conn_window_size         | int    | `0`                                                                                                                                                                            |                                                                                                             |
| server_config.servers.grpc.server.grpc.initial_window_size              | int    | `0`                                                                                                                                                                            |                                                                                                             |
| server_config.servers.grpc.server.grpc.interceptors                     | list   | `[]`                                                                                                                                                                           |                                                                                                             |
| server_config.servers.grpc.server.grpc.keepalive.max_conn_age           | string | `""`                                                                                                                                                                           | gRPC server keep alive max connection age                                                                   |
| server_config.servers.grpc.server.grpc.keepalive.max_conn_age_grace     | string | `""`                                                                                                                                                                           | gRPC server keep alive max connection age grace                                                             |
| server_config.servers.grpc.server.grpc.keepalive.max_conn_idle          | string | `""`                                                                                                                                                                           | gRPC server keep alive max connection idle                                                                  |
| server_config.servers.grpc.server.grpc.keepalive.min_time               | string | `"60s"`                                                                                                                                                                        | gRPC server keep alive min_time                                                                             |
| server_config.servers.grpc.server.grpc.keepalive.permit_without_stream  | bool   | `true`                                                                                                                                                                         | gRPC server keep alive permit_without_stream                                                                |
| server_config.servers.grpc.server.grpc.keepalive.time                   | string | `"120s"`                                                                                                                                                                       | gRPC server keep alive time                                                                                 |
| server_config.servers.grpc.server.grpc.keepalive.timeout                | string | `"30s"`                                                                                                                                                                        | gRPC server keep alive timeout                                                                              |
| server_config.servers.grpc.server.grpc.max_header_list_size             | int    | `0`                                                                                                                                                                            |                                                                                                             |
| server_config.servers.grpc.server.grpc.max_receive_message_size         | int    | `0`                                                                                                                                                                            |                                                                                                             |
| server_config.servers.grpc.server.grpc.max_send_message_size            | int    | `0`                                                                                                                                                                            |                                                                                                             |
| server_config.servers.grpc.server.grpc.read_buffer_size                 | int    | `0`                                                                                                                                                                            |                                                                                                             |
| server_config.servers.grpc.server.grpc.write_buffer_size                | int    | `0`                                                                                                                                                                            |                                                                                                             |
| server_config.servers.grpc.server.mode                                  | string | `"GRPC"`                                                                                                                                                                       |                                                                                                             |
| server_config.servers.grpc.server.network                               | string | `"tcp"`                                                                                                                                                                        |                                                                                                             |
| server_config.servers.grpc.server.probe_wait_time                       | string | `"3s"`                                                                                                                                                                         |                                                                                                             |
| server_config.servers.grpc.server.restart                               | bool   | `true`                                                                                                                                                                         |                                                                                                             |
| server_config.servers.grpc.server.socket_path                           | string | `""`                                                                                                                                                                           |                                                                                                             |
| server_config.servers.grpc.serviecPort                                  | int    | `8081`                                                                                                                                                                         |                                                                                                             |
| server_config.servers.rest.enabled                                      | bool   | `false`                                                                                                                                                                        |                                                                                                             |
| server_config.tls.ca                                                    | string | `"/path/to/ca"`                                                                                                                                                                |                                                                                                             |
| server_config.tls.cert                                                  | string | `"/path/to/cert"`                                                                                                                                                              |                                                                                                             |
| server_config.tls.enabled                                               | bool   | `false`                                                                                                                                                                        |                                                                                                             |
| server_config.tls.insecure_skip_verify                                  | bool   | `false`                                                                                                                                                                        | enable/disable skip SSL certificate verification                                                            |
| server_config.tls.key                                                   | string | `"/path/to/key"`                                                                                                                                                               |                                                                                                             |
| service.annotations                                                     | object | `{}`                                                                                                                                                                           | service annotations                                                                                         |
| service.enabled                                                         | bool   | `true`                                                                                                                                                                         | service enabled                                                                                             |
| service.externalTrafficPolicy                                           | string | `""`                                                                                                                                                                           | external traffic policy (can be specified when service type is LoadBalancer or NodePort) : Cluster or Local |
| service.labels                                                          | object | `{}`                                                                                                                                                                           | service labels                                                                                              |
| service.type                                                            | string | `"ClusterIP"`                                                                                                                                                                  | service type: ClusterIP, LoadBalancer or NodePort                                                           |
| serviceAccount.create                                                   | bool   | `true`                                                                                                                                                                         | service account will be created                                                                             |
| serviceAccount.name                                                     | string | `"vald-benchmark-operator"`                                                                                                                                                    | name of service account                                                                                     |
| time_zone                                                               | string | `""`                                                                                                                                                                           | time_zone                                                                                                   |
| tolerations                                                             | list   | `[]`                                                                                                                                                                           | tolerations                                                                                                 |
| version                                                                 | string | `"v0.0.0"`                                                                                                                                                                     | version of benchmark-operator config                                                                        |
